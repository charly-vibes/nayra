{"id":"nayra-01r","title":"Phase 4: Event Info Integration","description":"Wire tooltip and panel into main.js with state subscriptions.\n\n## Changes Required\n\n**File: src/main.js**\n- Import createTooltip and createEventPanel\n- Create tooltip and panel instances\n- Track mouse position for tooltip positioning\n- Subscribe to store for hoveredEventId changes (500ms delay)\n- Subscribe to store for selectedEventIds changes\n\n**File: src/interaction/input.js**\n- Add callback onMousePosition(x, y) to track cursor for tooltip\n- Provide mouse position on mousemove (only when not dragging)\n\n**Tests: test/e2e/event-info.spec.js**\n- Hover event 500ms → tooltip appears\n- Move away → tooltip hides immediately\n- Click event → panel opens with details\n- Press Escape → panel closes, event selected\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:19:09.55520154-03:00","created_by":"charly vibes","updated_at":"2026-02-05T17:20:48.342745675-03:00","closed_at":"2026-02-05T17:20:48.342745675-03:00","close_reason":"Phase 4 complete: Event info integration with 500ms tooltip delay and selection panel"}
{"id":"nayra-0e2","title":"Phase 1: Project scaffolding","description":"Create index.html, src/ directory structure, main.js entry point. Verify: just dev serves page without errors.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.280651877-03:00","created_by":"charly vibes","updated_at":"2026-01-20T19:57:53.903633143-03:00","closed_at":"2026-01-20T19:57:53.903633143-03:00","close_reason":"Project scaffolding complete"}
{"id":"nayra-0ey","title":"Event Selection and Hover States","description":"Implement event selection and hover states for the timeline. Enables users to click events to select them, see visual feedback on hover, and manage multi-selection with modifier keys. Foundational for tooltips, detail panels, and accessibility.\n\nEpic complete when:\n- All 3 phase issues closed\n- just test \u0026\u0026 just lint pass\n- Manual verification confirms hover/click/multi-select behavior\n\nRef: plans/2026-01-23-event-selection.md\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:57:53.706611427-03:00","created_by":"charly vibes","updated_at":"2026-02-05T12:08:56.048842448-03:00","closed_at":"2026-02-05T12:08:56.048842448-03:00","close_reason":"All 3 phases complete: hit detection, visual feedback, input handling. 307 tests pass. Manual verification confirmed."}
{"id":"nayra-0jb","title":"Phase 6: Pan interaction","description":"Create input.js with mousedown/mousemove/mouseup handlers. Convert px delta to BigInt time via pxToTime. Smooth 1:1 tracking.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.887899214-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:45:26.468968389-03:00","closed_at":"2026-01-21T20:45:26.468968389-03:00","close_reason":"Implemented in commit 8bd08ba","dependencies":[{"issue_id":"nayra-0jb","depends_on_id":"nayra-4e4","type":"blocks","created_at":"2026-01-20T19:49:24.913243916-03:00","created_by":"charly vibes"}]}
{"id":"nayra-0je","title":"Migrate to PointerEvents API","description":"Replace mouse event listeners with pointer events in input.js:\n- Replace mousedown with pointerdown\n- Replace mousemove with pointermove\n- Replace mouseup with pointerup\n- Replace mouseleave with pointerleave and add pointercancel handler\n- Add setPointerCapture(pointerId) on pointerdown (wrap in try-catch for InvalidStateError)\n- Retain wheel event listener (not part of PointerEvents migration)\n- Verify tap-to-select works via pointer events (tap = pointerdown + pointerup without drag)\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:21.47760104-03:00","created_by":"charly vibes","updated_at":"2026-02-06T12:16:38.141786199-03:00","closed_at":"2026-02-06T12:16:38.141786199-03:00","close_reason":"Migrated from mouse events to pointer events with setPointerCapture and pointercancel handler","dependencies":[{"issue_id":"nayra-0je","depends_on_id":"nayra-pzi","type":"blocks","created_at":"2026-02-06T12:10:16.46559311-03:00","created_by":"charly vibes"}]}
{"id":"nayra-0qz","title":"Add examples of multilane events to demo/documentation","description":"Create examples demonstrating multilane event functionality:\n- Events spanning multiple lanes/tracks\n- Various multilane configurations\n- Visual examples for documentation\n- Interactive demo cases\n\nThis will help users understand multilane capabilities and provide testing scenarios.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T19:07:37.943201094-03:00","created_by":"charly vibes","updated_at":"2026-02-20T20:16:08.790343712-03:00","closed_at":"2026-02-20T20:16:08.790343712-03:00","close_reason":"Closed"}
{"id":"nayra-0xq","title":"Add help menu with hotkeys and explanation","description":"Add a help menu/modal that displays available keyboard shortcuts and explains the application's features.\n\n## Acceptance Criteria\n- Help menu accessible via '?' or 'h' key\n- Lists all keyboard shortcuts with descriptions\n- Explains basic navigation (pan, zoom, etc.)\n- Can be dismissed with Escape or clicking outside\n\n## Implementation Notes\n- Reference existing shortcuts in src/interaction/input.js:10-14\n- Current shortcuts: Home/h (jump to today), / (open search)\n\n## Verification\n1. Run `just dev`\n2. Press ? key - modal appears\n3. Verify all shortcuts listed\n4. Press Escape - modal dismisses\n5. Click outside modal - modal dismisses\n\n## Approach\nFollow TDD: write tests first, then implement.","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T21:16:53.926363836-03:00","created_by":"charly vibes","updated_at":"2026-01-21T22:52:36.117139628-03:00","closed_at":"2026-01-21T22:52:36.117139628-03:00","close_reason":"Implemented help menu with ? keyboard shortcut, all tests pass (149 unit + 9 E2E)"}
{"id":"nayra-119","title":"Wire help button into main.js","description":"Import createHelpButton in src/main.js and wire it to the existing help menu toggle logic.\n\n- Import createHelpButton from src/ui/help-button.js\n- Create button instance with onToggleHelp callback that calls helpMenu.show()/hide()\n- Reuse the same toggle logic already used by the keyboard shortcut\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-08T17:27:36.928445733-03:00","created_by":"charly vibes","updated_at":"2026-02-08T17:37:00.450531541-03:00","closed_at":"2026-02-08T17:37:00.450531541-03:00","close_reason":"Wired help button into main.js with shared toggleHelp function","dependencies":[{"issue_id":"nayra-119","depends_on_id":"nayra-u6f","type":"blocks","created_at":"2026-02-08T17:28:30.832746559-03:00","created_by":"charly vibes"},{"issue_id":"nayra-119","depends_on_id":"nayra-s1p","type":"parent-child","created_at":"2026-02-08T17:28:34.989535437-03:00","created_by":"charly vibes"}]}
{"id":"nayra-2hq","title":"Touch Input Support via PointerEvents API","description":"Epic: Add touch input support by migrating to PointerEvents API. Implements tap-to-select, pinch-to-zoom, swipe-to-pan with momentum, double-tap zoom, and long-press context menu.\n\n**Related Tasks:**\n- nayra-3ck: Double-Tap to Zoom\n- nayra-nfo: Swipe-to-Pan with Momentum\n- nayra-s6j: Long-Press Context Menu\n- nayra-eay: Edge Cases \u0026 Error Handling\n- nayra-de8: Testing \u0026 Polish\n- nayra-sm0: Integration coverage and documentation\n\n**Related Spec:** openspec/changes/add-touch-input/proposal.md\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:09.98546419-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:09:26.497312987-03:00","closed_at":"2026-02-20T17:09:26.497312987-03:00","close_reason":"All touch input features implemented and tested: PointerEvents API migration, double-tap zoom, swipe-to-pan with momentum, long-press context menu, edge cases, and comprehensive testing (634 tests passing). Documentation complete in README."}
{"id":"nayra-2zs","title":"Add JSON-LD/Schema.org transformer","description":"Create a transformer that converts JSON-LD events using Schema.org vocabulary to Nayra event format.\n\n**Location:** `src/data/jsonld-transformer.js`\n\n**Property mapping (from spec lines 234-242):**\n| Schema.org | Nayra |\n|------------|-------|\n| @id or schema:identifier | id |\n| schema:name | label |\n| schema:description | description |\n| schema:startDate | start |\n| schema:endDate | end |\n| schema:url | url |\n\n**Input formats:**\n- Single event with @context and @type: Event\n- Array of events in @graph\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-json-ld-and-schemaorg-support\n\n**Verification:**\n1. Transform Schema.org Event to Nayra event\n2. Handle @graph arrays with multiple events\n3. Extract @id correctly\n4. Run: `just test` passes jsonld-transformer tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:30:03.518339975-03:00","created_by":"charly vibes","updated_at":"2026-01-22T00:52:13.947211093-03:00","closed_at":"2026-01-22T00:52:13.947211093-03:00","close_reason":"Closed"}
{"id":"nayra-30a","title":"Keyboard Navigation","description":"Implement comprehensive keyboard navigation for accessibility. Users should be able to navigate through events using Tab/Shift+Tab, jump to first/last events with Home/End, and activate events with Enter/Space.","status":"closed","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:56.912615283-03:00","created_by":"charly vibes","updated_at":"2026-02-20T19:01:28.80180031-03:00","closed_at":"2026-02-20T19:01:28.80180031-03:00","close_reason":"Closed"}
{"id":"nayra-30a.1","title":"Implement Tab/Shift+Tab event navigation","description":"Navigate forward/backward through events chronologically.\n\n## Files to Modify\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/interaction/input.js - Add Tab/Shift+Tab key event handlers\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/test/unit/input.test.js - Add keyboard navigation tests\n\n## Implementation Steps\n1. Add keyboard event listener for Tab key in input.js\n2. Track currently focused event index in timeline state\n3. Implement chronological event ordering function\n4. Add Tab handler to move focus to next event (focus index + 1)\n5. Add Shift+Tab handler to move focus to previous event (focus index - 1)\n6. Handle wrap-around (last event -\u003e first event, first event -\u003e last event)\n7. Emit focus change events for rendering system\n8. Prevent default Tab behavior to avoid browser focus changes\n\n## Success Criteria\n- [ ] Pressing Tab moves focus to next chronological event\n- [ ] Pressing Shift+Tab moves focus to previous chronological event\n- [ ] Focus wraps from last to first event and vice versa\n- [ ] Tests pass: Tab navigation forward/backward scenarios\n- [ ] Tests verify focus state updates correctly\n- [ ] Tests verify event order follows chronological timeline\n\n## Test Requirements (TDD)\nWrite tests BEFORE implementation in test/unit/input.test.js:\n- Test: Tab key moves focus index forward\n- Test: Shift+Tab key moves focus index backward\n- Test: Tab wraps from last event to first\n- Test: Shift+Tab wraps from first to last\n- Test: Focus state updates emit correct events\n\n## Spec Reference\nopenspec/specs/user-interaction/spec.md\n- Scenario: Tab navigation forward\n- Scenario: Tab navigation backward","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:00.563608866-03:00","created_by":"charly vibes","updated_at":"2026-02-20T18:30:33.834532576-03:00","closed_at":"2026-02-20T18:30:33.834532576-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-30a.1","depends_on_id":"nayra-30a","type":"parent-child","created_at":"2026-02-20T17:17:00.564537063-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.1","depends_on_id":"nayra-30a.4","type":"blocks","created_at":"2026-02-20T17:58:21.714906668-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.1","depends_on_id":"nayra-30a.6","type":"blocks","created_at":"2026-02-20T17:58:22.490153371-03:00","created_by":"charly vibes"}]}
{"id":"nayra-30a.2","title":"Add Home/End key navigation","description":"Jump to first/last events in timeline using Home/End keys.\n\n## Files to Modify\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/interaction/input.js - Add Home/End key event handlers\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/viewport/pan.js - Trigger viewport pan to event position\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/test/unit/input.test.js - Add Home/End key tests\n\n## Implementation Steps\n1. Add keyboard event listener for Home/End keys in input.js\n2. Implement findFirstEvent() to get earliest chronological event\n3. Implement findLastEvent() to get latest chronological event\n4. Add Home handler to set focus to first event and trigger pan\n5. Add End handler to set focus to last event and trigger pan\n6. Calculate event position and trigger viewport pan animation\n7. Update focus state and emit focus change events\n8. Prevent default Home/End behavior (page scroll)\n\n## Success Criteria\n- [ ] Pressing Home focuses first chronological event\n- [ ] Pressing End focuses last chronological event\n- [ ] Viewport pans to show the focused event\n- [ ] Tests pass: Home key navigation scenario\n- [ ] Tests pass: End key navigation scenario\n- [ ] Tests verify viewport pan is triggered with correct coordinates\n\n## Test Requirements (TDD)\nWrite tests BEFORE implementation in test/unit/input.test.js:\n- Test: Home key sets focus to first event\n- Test: End key sets focus to last event\n- Test: Home triggers viewport pan to first event position\n- Test: End triggers viewport pan to last event position\n- Test: Default browser behavior is prevented\n\n## Spec Reference\nopenspec/specs/user-interaction/spec.md\n- Scenario: Home key navigation\n- Scenario: End key navigation","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:01.211828414-03:00","created_by":"charly vibes","updated_at":"2026-02-20T18:47:30.910057904-03:00","closed_at":"2026-02-20T18:47:30.910057904-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-30a.2","depends_on_id":"nayra-30a","type":"parent-child","created_at":"2026-02-20T17:17:01.212634972-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.2","depends_on_id":"nayra-30a.6","type":"blocks","created_at":"2026-02-20T17:58:23.392049493-03:00","created_by":"charly vibes"}]}
{"id":"nayra-30a.3","title":"Implement Enter/Space event activation","description":"Activate focused events to show details using Enter/Space keys.\n\n## Files to Modify\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/interaction/input.js - Add Enter/Space key handlers\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/ui/event-details.js - Handle event activation and display\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/test/unit/input.test.js - Add activation tests\n\n## Implementation Steps\n1. Add keyboard event listener for Enter and Space keys in input.js\n2. Get currently focused event from focus state\n3. Add Enter/Space handler to activate (select) focused event\n4. Update selection state to mark event as selected\n5. Trigger event details panel display\n6. Emit activation event for UI layer\n7. Prevent default Space behavior (page scroll)\n8. Handle case where no event has focus (no-op)\n\n## Success Criteria\n- [ ] Pressing Enter on focused event selects it\n- [ ] Pressing Space on focused event selects it\n- [ ] Event details panel displays for activated event\n- [ ] Visual selection state updates correctly\n- [ ] Tests pass: Activate focused event scenario\n- [ ] Tests verify event details are displayed\n- [ ] Tests verify no action when no event focused\n\n## Test Requirements (TDD)\nWrite tests BEFORE implementation in test/unit/input.test.js:\n- Test: Enter key selects focused event\n- Test: Space key selects focused event\n- Test: Activation triggers event details display\n- Test: No action when no event has focus\n- Test: Default Space behavior (page scroll) is prevented\n- Test: Selection state updates correctly\n\n## Spec Reference\nopenspec/specs/user-interaction/spec.md\n- Scenario: Activate focused event","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:02.012270242-03:00","created_by":"charly vibes","updated_at":"2026-02-20T18:52:33.190523668-03:00","closed_at":"2026-02-20T18:52:33.190523668-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-30a.3","depends_on_id":"nayra-30a","type":"parent-child","created_at":"2026-02-20T17:17:02.013351748-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.3","depends_on_id":"nayra-30a.6","type":"blocks","created_at":"2026-02-20T17:58:24.468054677-03:00","created_by":"charly vibes"}]}
{"id":"nayra-30a.4","title":"Add visible focus indicators","description":"Add WCAG-compliant visible focus indicators (2px outline, 3:1 contrast ratio).\n\n## Files to Modify\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/rendering/event-renderer.js - Add focus ring rendering\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/styles/focus.css - Define focus indicator styles\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/test/accessibility/focus-indicators.test.js - Add WCAG compliance tests\n\n## Implementation Steps\n1. Create focus.css with WCAG 2.1 compliant focus styles\n2. Define 2px solid outline for focused events\n3. Calculate and set contrast ratio of 3:1 minimum\n4. Update event-renderer.js to apply focus class to focused events\n5. Add focus state detection in render loop\n6. Ensure focus ring is visible at all zoom levels\n7. Add high-contrast mode support\n8. Test focus indicators with color contrast analyzer\n\n## Success Criteria\n- [ ] Focused events show 2px outline\n- [ ] Focus outline has minimum 3:1 contrast ratio (WCAG 2.1 Level AA)\n- [ ] Focus indicators visible at all zoom levels\n- [ ] Focus ring distinguishable from selection state\n- [ ] Tests pass: WCAG 2.4.7 Focus Visible compliance\n- [ ] Tests verify contrast ratio \u003e= 3:1\n- [ ] Visual regression tests pass for focus states\n\n## Test Requirements (TDD)\nWrite tests BEFORE implementation in test/accessibility/focus-indicators.test.js:\n- Test: Focus ring has 2px width\n- Test: Focus ring contrast ratio is at least 3:1\n- Test: Focus indicator visible on light backgrounds\n- Test: Focus indicator visible on dark backgrounds\n- Test: Focus ring does not obscure event content\n- Test: High-contrast mode shows enhanced focus ring\n\n## Spec Reference\nopenspec/specs/user-interaction/spec.md\n- Scenario: Tab navigation forward (focused event SHALL be highlighted)\n- WCAG 2.1 Success Criterion 2.4.7 Focus Visible (Level AA)","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:02.688905662-03:00","created_by":"charly vibes","updated_at":"2026-02-20T18:30:33.817340331-03:00","closed_at":"2026-02-20T18:30:33.817340331-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-30a.4","depends_on_id":"nayra-30a","type":"parent-child","created_at":"2026-02-20T17:17:02.690020671-03:00","created_by":"charly vibes"}]}
{"id":"nayra-30a.5","title":"Implement focus auto-pan","description":"Auto-scroll viewport when focused event moves off-screen during keyboard navigation.\n\n## Files to Modify\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/interaction/input.js - Trigger auto-pan on focus change\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/viewport/pan.js - Implement smart auto-pan logic\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/test/unit/viewport-pan.test.js - Add auto-pan tests\n\n## Implementation Steps\n1. Add focus change listener in pan.js\n2. Calculate focused event's screen position\n3. Check if event is within viewport bounds\n4. If off-screen, calculate target pan position with padding\n5. Implement smooth pan animation (300ms easing)\n6. Center event vertically, show with 20% horizontal margin\n7. Handle both vertical and horizontal panning\n8. Debounce rapid focus changes to avoid choppy animation\n\n## Success Criteria\n- [ ] Viewport pans when focused event is off-screen\n- [ ] Focused event appears with comfortable margin (20% from edge)\n- [ ] Pan animation is smooth (300ms ease-out)\n- [ ] No pan when focused event is already visible\n- [ ] Tests pass: Tab navigation forward scenario (viewport SHALL pan)\n- [ ] Tests verify pan animation parameters\n- [ ] Tests verify no-pan when event visible\n\n## Test Requirements (TDD)\nWrite tests BEFORE implementation in test/unit/viewport-pan.test.js:\n- Test: Auto-pan triggers when event is above viewport\n- Test: Auto-pan triggers when event is below viewport\n- Test: Auto-pan triggers when event is left of viewport\n- Test: Auto-pan triggers when event is right of viewport\n- Test: No auto-pan when event is fully visible\n- Test: Pan animation uses 300ms duration\n- Test: Event positioned with 20% margin from edges\n- Test: Rapid focus changes are debounced\n\n## Spec Reference\nopenspec/specs/user-interaction/spec.md\n- Scenario: Tab navigation forward (viewport SHALL pan to keep focused event visible)\n- Scenario: Home key navigation (viewport SHALL pan to first event)\n- Scenario: End key navigation (viewport SHALL pan to last event)","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:03.444322839-03:00","created_by":"charly vibes","updated_at":"2026-02-20T19:01:15.642362864-03:00","closed_at":"2026-02-20T19:01:15.642362864-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-30a.5","depends_on_id":"nayra-30a","type":"parent-child","created_at":"2026-02-20T17:17:03.445148072-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.5","depends_on_id":"nayra-30a.1","type":"blocks","created_at":"2026-02-20T17:58:25.186680112-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.5","depends_on_id":"nayra-30a.2","type":"blocks","created_at":"2026-02-20T17:58:25.987648249-03:00","created_by":"charly vibes"},{"issue_id":"nayra-30a.5","depends_on_id":"nayra-30a.3","type":"blocks","created_at":"2026-02-20T17:58:26.816561396-03:00","created_by":"charly vibes"}]}
{"id":"nayra-30a.6","title":"Create focus management system","description":"Track and restore focus state, handle focus persistence across viewport changes.\n\n## Files to Modify\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/interaction/focus-manager.js - Create new focus management module\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/src/state/store.js - Add focus state to global state\n- /var/home/sasha/para/areas/dev/gh/charly/nayra/test/unit/focus-manager.test.js - Add focus management tests\n\n## Implementation Steps\n1. Create focus-manager.js module with FocusManager class\n2. Add focus state to store (focusedEventId, focusMode, focusHistory)\n3. Implement setFocus(eventId) to update focused event\n4. Implement getFocus() to retrieve current focus\n5. Add focus history stack for Undo/Redo navigation\n6. Handle focus restoration after viewport zoom/pan\n7. Handle focus when events are filtered/hidden\n8. Implement focus trap for keyboard-only navigation mode\n9. Add ARIA live region updates for screen readers\n\n## Success Criteria\n- [ ] Focus state persists across zoom operations\n- [ ] Focus state persists across pan operations\n- [ ] Focus restores to nearest visible event when current event filtered\n- [ ] Focus history supports back/forward navigation\n- [ ] Tests pass: Focus state persistence scenarios\n- [ ] Tests verify focus restoration logic\n- [ ] Tests verify ARIA announcements for focus changes\n- [ ] Integration with Tab/Home/End navigation works correctly\n\n## Test Requirements (TDD)\nWrite tests BEFORE implementation in test/unit/focus-manager.test.js:\n- Test: setFocus updates focus state\n- Test: getFocus returns current focused event\n- Test: Focus persists after viewport zoom\n- Test: Focus persists after viewport pan\n- Test: Focus moves to nearest event when current filtered out\n- Test: Focus history tracks focus changes\n- Test: Focus restoration on viewport change\n- Test: ARIA live region announces focus changes\n- Test: Focus manager integrates with keyboard navigation\n\n## Spec Reference\nopenspec/specs/user-interaction/spec.md\n- Scenario: Tab navigation forward (focused event SHALL be highlighted)\n- All keyboard navigation scenarios require focus state management","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:04.097916582-03:00","created_by":"charly vibes","updated_at":"2026-02-20T18:17:04.39231999-03:00","closed_at":"2026-02-20T18:17:04.39231999-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-30a.6","depends_on_id":"nayra-30a","type":"parent-child","created_at":"2026-02-20T17:17:04.098990733-03:00","created_by":"charly vibes"}]}
{"id":"nayra-3ck","title":"Double-Tap to Zoom","description":"Implement double-tap zoom in GestureRecognizer:\n- Track last tap time and position\n- Detect double-tap: two taps within 300ms, \u003c20px apart\n- On double-tap, zoom in and center on tap position (or zoom out if already zoomed)\n- Write unit tests for double-tap detection\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:35.788319583-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:05:12.768903379-03:00","closed_at":"2026-02-20T17:05:12.768903379-03:00","close_reason":"Features already implemented with passing tests","dependencies":[{"issue_id":"nayra-3ck","depends_on_id":"nayra-0je","type":"blocks","created_at":"2026-02-06T12:10:16.534120288-03:00","created_by":"charly vibes"}]}
{"id":"nayra-4e4","title":"Phase 5: Render loop with revision checking","description":"Wire up requestAnimationFrame loop in main.js. Only redraw when state.revision changes. No dispatch from render loop.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.777340529-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:07:32.050233859-03:00","closed_at":"2026-01-20T20:07:32.050233859-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-4e4","depends_on_id":"nayra-a7w","type":"blocks","created_at":"2026-01-20T19:49:24.848120348-03:00","created_by":"charly vibes"}]}
{"id":"nayra-4kv","title":"Implement greedy interval coloring algorithm","description":"Implement the core greedy interval coloring algorithm for lane assignment.\n\n**Requirements:**\n- Sort events by start time in O(N log N)\n- Assign each event to the first available lane in O(N)\n- A lane is available if its last event ends before current event starts\n- Create new lanes only when necessary\n- Handle simultaneous events (same start time) with tie-breaker (longer events in lower lanes)\n- Ensure deterministic layout\n\n**Acceptance Criteria:**\n- Non-overlapping events placed in lane 0\n- Overlapping events distributed across multiple lanes\n- Total complexity is O(N log N)\n- Layout is deterministic and reproducible\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirement: 1D Bin Packing)\n**Blocks:** Rendering integration, spatial indexing\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:03.767102866-03:00","created_by":"charly vibes","updated_at":"2026-02-20T11:24:00.965481333-03:00","closed_at":"2026-02-20T11:24:00.965481333-03:00","close_reason":"Closed"}
{"id":"nayra-4s6","title":"Add error reporting/logging to JSON-LD transformer","description":"transformEvent() returns null silently when required fields are missing. The caller discards these without logging. Consider:\n- Returning error structures with field name\n- Accumulating warnings for partial failures\n- Adding optional strict mode that throws","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:21.136141061-03:00","created_by":"charly vibes","updated_at":"2026-01-22T20:05:48.60744844-03:00","closed_at":"2026-01-22T20:05:48.60744844-03:00","close_reason":"Added transformJsonLdWithReport with error structures and strict mode - 7 new tests"}
{"id":"nayra-5bt","title":"Add search bar to jump to specific date/time","description":"Add a search bar overlay activated by '/' key. Should parse various date formats (years, Ma, Ga, named events) and jump the viewport to that time. Similar to Vim's command mode or browser address bar.","status":"closed","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T20:59:40.95418397-03:00","created_by":"charly vibes","updated_at":"2026-01-21T21:05:59.124649665-03:00","closed_at":"2026-01-21T21:05:59.124649665-03:00","close_reason":"Implemented: '/' opens search bar, parses dates (2000, 100 Ma, 4.5 Ga, Big Bang, now)"}
{"id":"nayra-5jt","title":"Add Wikidata SPARQL result transformer","description":"Create a transformer that converts Wikidata SPARQL query results to Nayra event format.\n\n**Location:** `src/data/wikidata-transformer.js`\n\n**Property mapping (from spec lines 175-186):**\n| Wikidata | Nayra |\n|----------|-------|\n| ?item URI | id (extract Q-number) |\n| ?itemLabel | label |\n| ?itemDescription | description |\n| P580 ?startTime | start |\n| P582 ?endTime | end |\n| P31 ?instanceOf | category |\n| ?article | url |\n\n**BCE date adjustment (spec lines 226-229):**\n- Wikidata uses astronomical convention (year 0 exists)\n- Nayra uses historical convention (no year 0)\n- Adjust: astronomical -43 → historical 44 BCE\n\n**Input:** SPARQL JSON results format\n**Output:** Array of Nayra events with source: 'wikidata:Qxxxx'\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-wikidata-compatibility\n\n**Verification:**\n1. Transform sample Wikidata result to Nayra event\n2. Q-number extracted correctly from URI\n3. BCE dates adjusted (e.g., -0043 → 44 BCE)\n4. Run: `just test` passes transformer tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:31.245528583-03:00","created_by":"charly vibes","updated_at":"2026-01-22T20:03:06.683222739-03:00","closed_at":"2026-01-22T20:03:06.683222739-03:00","close_reason":"Implemented Wikidata SPARQL transformer with BCE adjustment - 15 tests","dependencies":[{"issue_id":"nayra-5jt","depends_on_id":"nayra-qvm","type":"blocks","created_at":"2026-01-22T00:30:06.376821323-03:00","created_by":"charly vibes"}]}
{"id":"nayra-6sp","title":"Tracer Bullet: Prove core architecture","description":"Minimal end-to-end slice validating Canvas 60FPS, BigInt time, rational scale, pan/zoom. See plans/2026-01-19-tracer-bullet.md\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:48:40.019280675-03:00","created_by":"charly vibes","updated_at":"2026-01-21T21:36:35.611241345-03:00","closed_at":"2026-01-21T21:36:35.611241345-03:00","close_reason":"Tracer bullet complete: Canvas 60FPS, BigInt time, rational scale, pan/zoom all proven per git history"}
{"id":"nayra-7ow","title":"Export SUPPORTED_FORMATS from time-parser for help display","description":"SUPPORTED_FORMATS constant in time-parser.js lists all valid input formats but is not exported. Exporting it would allow the help system to display supported formats dynamically.","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:21.502779133-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:42:27.103953553-03:00","closed_at":"2026-01-23T21:42:27.103953553-03:00","close_reason":"Added export keyword to SUPPORTED_FORMATS constant"}
{"id":"nayra-7wn","title":"Create JSON Schema file for event validation","description":"Create a JSON Schema file for validating event data according to the data-schema spec.\n\n**Location:** `src/data/event.schema.json`\n\n**Schema Requirements (from spec lines 6-29):**\n- Required fields: id (string), start (string), label (string)\n- Optional fields: end, description, category, tags, priority, precision, url, source, metadata\n- priority: number 0-4\n- precision: enum [\"day\", \"month\", \"year\", \"decade\", \"century\"]\n- tags: array of strings\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-event-structure\n\n**Verification:**\n1. Schema file exists at src/data/event.schema.json\n2. Schema validates minimal event: {id, start, label}\n3. Schema rejects event missing required fields\n4. Run: `npx ajv validate -s src/data/event.schema.json -d test-event.json`","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:16.09015561-03:00","created_by":"charly vibes","updated_at":"2026-01-22T00:52:13.939003212-03:00","closed_at":"2026-01-22T00:52:13.939003212-03:00","close_reason":"Closed"}
{"id":"nayra-8cl","title":"Phase 7: Zoom interaction","description":"Add wheel event handler with anchor-point zoom. Calculate world time under cursor, apply zoom, compensate viewport. Clamp to bounds.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.998153652-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:45:26.4894886-03:00","closed_at":"2026-01-21T20:45:26.4894886-03:00","close_reason":"Implemented in commit 8bd08ba","dependencies":[{"issue_id":"nayra-8cl","depends_on_id":"nayra-0jb","type":"blocks","created_at":"2026-01-20T19:49:24.979212946-03:00","created_by":"charly vibes"}]}
{"id":"nayra-8ns","title":"Phase 3: Input Handling for Selection","description":"Wire up input.js for selection and hover.\n\nChanges to src/interaction/input.js:\n- Track mouse position on mousemove (not just when dragging)\n- On non-drag click: call findEventAtPoint(), dispatch SELECT_EVENT or CLEAR_SELECTION\n- On Ctrl/Cmd+click: dispatch TOGGLE_EVENT_SELECTION\n- On mousemove (not dragging): dispatch SET_HOVER with found event or null\n- Distinguish click from drag: 3px threshold\n- Update cursor: pointer when hovering over event, grab otherwise\n- On mouseleave: clear hover state and reset cursor\n\nTests in test/unit/input.test.js:\n- Click on event dispatches SELECT_EVENT\n- Ctrl+click dispatches TOGGLE_EVENT_SELECTION\n- Click on background dispatches CLEAR_SELECTION\n- Mouse move over event dispatches SET_HOVER\n- Mouse move off event dispatches SET_HOVER with null\n- Mouse leave canvas dispatches SET_HOVER with null\n- Drag does not trigger selection (distance threshold)\n\nManual verification:\n- Hover → cursor changes to pointer, event lightens\n- Click event → yellow border (selected)\n- Click another → first deselected, second selected\n- Ctrl+click → both selected\n- Click background → all deselected\n- Drag to pan → no accidental selection\n\nSuccess: just test \u0026\u0026 just lint pass.\n\nRef: plans/2026-01-23-event-selection.md#phase-3-input-handling-for-selection\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:58:28.103364876-03:00","created_by":"charly vibes","updated_at":"2026-01-23T23:21:06.141656806-03:00","closed_at":"2026-01-23T23:21:06.141656806-03:00","close_reason":"Implemented input handling for selection and hover: click-to-select, Ctrl/Cmd multi-select, hover detection with cursor changes, drag vs click threshold","dependencies":[{"issue_id":"nayra-8ns","depends_on_id":"nayra-9gz","type":"blocks","created_at":"2026-01-23T21:58:43.174604742-03:00","created_by":"charly vibes"},{"issue_id":"nayra-8ns","depends_on_id":"nayra-pnu","type":"blocks","created_at":"2026-01-23T21:58:43.247154203-03:00","created_by":"charly vibes"}]}
{"id":"nayra-96o","title":"Phase 2: BigInt time coordinates \u0026 rational scale","description":"Create time.js (constants, project, isVisible) and scale.js (rational numer/denom, pxToTime, timeToPx). Must handle 4.5Ga without precision loss.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.415836033-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:01:00.883673764-03:00","closed_at":"2026-01-20T20:01:00.883673764-03:00","close_reason":"BigInt time coordinates and rational scale implemented with 39 passing tests","dependencies":[{"issue_id":"nayra-96o","depends_on_id":"nayra-0e2","type":"blocks","created_at":"2026-01-20T19:49:24.644317758-03:00","created_by":"charly vibes"}]}
{"id":"nayra-9gz","title":"Phase 1: Hit Detection Module","description":"Create src/interaction/hit-detection.js with findEventAtPoint(x, y, events, viewportStart, scale, canvasHeight) function.\n\nUses linear scan over visible events, returns topmost event if overlapping (last in draw order). Uses projectToScreen from core/time.js.\n\nTests needed in test/unit/hit-detection.test.js:\n- No events → returns null\n- Click on event → returns that event\n- Click on gap → returns null\n- Overlapping events → returns topmost\n- Point events (4px width) → hit detection works\n- Span events → hit detection uses full width\n\nSuccess: just test passes with new hit-detection tests.\n\nRef: plans/2026-01-23-event-selection.md#phase-1-hit-detection-module\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:58:03.407280898-03:00","created_by":"charly vibes","updated_at":"2026-01-23T22:05:39.152448347-03:00","closed_at":"2026-01-23T22:05:39.152448347-03:00","close_reason":"Implemented findEventAtPoint with 19 tests"}
{"id":"nayra-9wc","title":"Implement spatial hash for hit detection","description":"Build spatial hash structure for efficient hit detection and collision queries.\n\n**Requirements:**\n- Divide screen into vertical buckets (~50px wide)\n- Map events to all buckets they intersect\n- O(1) average time for point queries\n- Support for overlapping event handling in same bucket\n- Rebuild hash on viewport changes within 16ms (one frame)\n\n**Acceptance Criteria:**\n- Hit detection queries run in O(1) average time\n- Multiple events in same bucket handled correctly\n- Hash rebuilds complete within one frame\n- Accurate collision detection for mouse/touch input\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirement: Spatial Indexing)\n**Related Files:** src/interaction/hit-detection.js\n**Depends On:** Lane assignment algorithm\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:11.757154836-03:00","created_by":"charly vibes","updated_at":"2026-02-20T11:43:41.481117557-03:00","closed_at":"2026-02-20T11:43:41.481117557-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-9wc","depends_on_id":"nayra-4kv","type":"blocks","created_at":"2026-02-20T10:55:47.609972699-03:00","created_by":"charly vibes"}]}
{"id":"nayra-9y7","title":"Add date format validation to event.schema.json","description":"event.schema.json accepts any string for start/end fields. Consider adding pattern validation to catch invalid date strings at schema validation time rather than runtime. Also consider expanding the precision enum to include geological scales (million_years, billion_years) to match time-parser capabilities.","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:21.85343125-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:45:21.962375755-03:00","closed_at":"2026-01-23T21:45:21.962375755-03:00","close_reason":"Added timeString ref with examples, extended precision enum with million_years/billion_years"}
{"id":"nayra-a2t","title":"Create example SPARQL queries for Wikidata patterns","description":"Create example SPARQL queries demonstrating how to fetch data from Wikidata for different use cases.\n\n**Location:** `examples/sparql/`\n\n**Queries to create:**\n1. `wars.sparql` - Fetch major wars with start/end dates\n2. `space-missions.sparql` - Space exploration events\n3. `ancient-events.sparql` - Events with BCE dates\n4. `scientists.sparql` - Scientists with birth/death dates\n\n**Each query should:**\n- Use SERVICE wikibase:label for labels\n- Select fields matching Wikidata property mapping (spec lines 175-186)\n- Include comments explaining the query\n- Be tested against query.wikidata.org\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-wikidata-compatibility\n\n**Verification:**\n1. All .sparql files exist in examples/sparql/\n2. Each query runs successfully on query.wikidata.org\n3. Results can be transformed using wikidata-transformer","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:41.488280805-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:47:42.568970846-03:00","closed_at":"2026-01-23T21:47:42.568970846-03:00","close_reason":"Created 4 SPARQL queries (wars, space-missions, ancient-events, scientists) with README"}
{"id":"nayra-a39","title":"Data Loader System","description":"Epic: Implement data loading from built-in examples, URLs, and local files. See plans/2026-01-23-data-loader.md for full plan.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-23T22:20:13.934273368-03:00","created_by":"charly vibes","updated_at":"2026-02-20T11:06:38.368011273-03:00","closed_at":"2026-02-20T11:06:38.368011273-03:00","close_reason":"All child tasks completed (phases 1-5)"}
{"id":"nayra-a39.1","title":"Phase 1: Normalizer Module","description":"Create src/data/normalizer.js that converts JSON events with string dates to internal format with BigInt timestamps.\n\n- Input: Events with start: '13.8 Ga', end: '66 Ma' (strings)\n- Output: { valid: Event[], errors: NormalizationError[], summary: string }\n- Uses parseTimeQuery() from time-parser.js\n- Tests: test/data/normalizer.test.js\n\nTest cases:\n- converts start-only event to BigInt\n- converts start and end to BigInt\n- returns error for invalid start\n- keeps event with valid start but invalid end, records error\n- preserves all other event properties\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T22:21:28.139332779-03:00","created_by":"charly vibes","updated_at":"2026-01-23T23:23:55.897995592-03:00","closed_at":"2026-01-23T23:23:55.897995592-03:00","close_reason":"Implemented normalizer module that converts string dates to BigInt timestamps using parseTimeQuery","dependencies":[{"issue_id":"nayra-a39.1","depends_on_id":"nayra-a39","type":"parent-child","created_at":"2026-01-23T22:21:28.140465474-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a39.2","title":"Phase 2: Loader Module","description":"Create src/data/loader.js with core loading infrastructure:\n\n- loadFromUrl(url) - Fetch JSON, detect format, transform, validate, normalize\n- loadFromFile(file) - Read File object, same pipeline\n- loadExample(name) - Load from examples/{name}.json\n- Returns: { events: [], errors: [], summary: string }\n\nAlso create src/data/examples.js manifest:\n- EXAMPLES array with id, label, desc for each example\n- DEFAULT_EXAMPLE = 'space-exploration'\n\nFormat detection order: Wikidata → JSON-LD → plain array\nTests: test/data/loader.test.js\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T22:21:38.986805807-03:00","created_by":"charly vibes","updated_at":"2026-02-04T23:54:37.506569062-03:00","closed_at":"2026-02-04T23:54:37.506569062-03:00","close_reason":"Implemented loader module with TDD: loadFromUrl, loadFromFile, loadExample, detectFormat. Created examples manifest with 4 examples. All 23 new tests passing.","dependencies":[{"issue_id":"nayra-a39.2","depends_on_id":"nayra-a39","type":"parent-child","created_at":"2026-01-23T22:21:38.988139157-03:00","created_by":"charly vibes"},{"issue_id":"nayra-a39.2","depends_on_id":"nayra-a39.1","type":"blocks","created_at":"2026-01-23T22:22:26.302636492-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a39.3","title":"Phase 3: Main.js Integration","description":"Integrate loader into main.js to replace generateSampleEvents():\n\n- Read ?example= URL param (default to DEFAULT_EXAMPLE)\n- Call loadExample() on startup\n- Dispatch SET_EVENTS with loaded events\n- Fallback to generateSampleEvents() if loader fails completely\n- Log warnings/errors to console\n\nVerify:\n- http://localhost:5173/?example=earth-history loads Earth history\n- http://localhost:5173/ loads default example\n- Invalid example name falls back to generated samples\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T22:21:46.025041087-03:00","created_by":"charly vibes","updated_at":"2026-02-05T12:13:57.468990205-03:00","closed_at":"2026-02-05T12:13:57.468990205-03:00","close_reason":"Integrated loader into main.js with URL param support and fallback","dependencies":[{"issue_id":"nayra-a39.3","depends_on_id":"nayra-a39","type":"parent-child","created_at":"2026-01-23T22:21:46.026074048-03:00","created_by":"charly vibes"},{"issue_id":"nayra-a39.3","depends_on_id":"nayra-a39.2","type":"blocks","created_at":"2026-01-23T22:22:30.799226554-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a39.4","title":"Phase 4: Drag-Drop Support","description":"Create src/ui/dropzone.js for drag-drop file loading:\n\n- Show overlay on dragenter with 'Drop JSON file to load'\n- Handle drop event, read file, call loadFromFile()\n- Accept .json extension OR attempt parse regardless (with warning)\n- Dispatch loaded events to store\n\nInitialize dropzone in main.js with canvas container.\nTests: test/ui/dropzone.test.js (basic unit tests)\n\nVerify:\n- Drag examples/ancient-civilizations.json onto canvas → loads events\n- Visual overlay appears during drag\n- Non-.json file still attempts parse (with console warning)\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T22:21:56.522574297-03:00","created_by":"charly vibes","updated_at":"2026-02-06T11:33:29.284756572-03:00","closed_at":"2026-02-06T11:33:29.284756572-03:00","close_reason":"Implemented drag-drop support with overlay and file loading","dependencies":[{"issue_id":"nayra-a39.4","depends_on_id":"nayra-a39","type":"parent-child","created_at":"2026-01-23T22:21:56.523708179-03:00","created_by":"charly vibes"},{"issue_id":"nayra-a39.4","depends_on_id":"nayra-a39.2","type":"blocks","created_at":"2026-01-23T22:22:30.845155316-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a39.5","title":"Phase 5: Help Menu Examples Tab + File Picker","description":"Add Examples tab to help menu (src/ui/help.js):\n\n- Add third tab 'Examples' alongside existing tabs\n- Import EXAMPLES from src/data/examples.js\n- List all examples with label and description\n- Click example → load that dataset, close menu\n- Add 'Load from file...' button that opens file picker\n- Pass onLoad callback from main.js\n\nVerify:\n- Press ? → see Examples tab with all 4 examples\n- Click 'Earth History' → timeline loads that data\n- Click 'Load from file...' → file picker opens\n- Select JSON file → loads events\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T22:22:05.236889431-03:00","created_by":"charly vibes","updated_at":"2026-02-05T12:35:55.806397863-03:00","closed_at":"2026-02-05T12:35:55.806397863-03:00","close_reason":"Implemented Examples tab with clickable example list and file picker","dependencies":[{"issue_id":"nayra-a39.5","depends_on_id":"nayra-a39","type":"parent-child","created_at":"2026-01-23T22:22:05.238608658-03:00","created_by":"charly vibes"},{"issue_id":"nayra-a39.5","depends_on_id":"nayra-a39.2","type":"blocks","created_at":"2026-01-23T22:22:30.897038445-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a7w","title":"Phase 4: Canvas renderer with culling","description":"Create renderer.js with DPI scaling, ResizeObserver, draw() with culling, FPS counter. Events as colored rectangles.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.654969362-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:06:07.720039105-03:00","closed_at":"2026-01-20T20:06:07.720039105-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-a7w","depends_on_id":"nayra-a9u","type":"blocks","created_at":"2026-01-20T19:49:24.782150587-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a9u","title":"Phase 3: State management store","description":"Create store.js with viewportStart, scale, canvasWidth, revision counter, events array. Derived viewportEnd. dispatch/subscribe pattern. ~60 lines.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.53904498-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:02:37.596194033-03:00","closed_at":"2026-01-20T20:02:37.596194033-03:00","close_reason":"State management store implemented with 22 tests","dependencies":[{"issue_id":"nayra-a9u","depends_on_id":"nayra-96o","type":"blocks","created_at":"2026-01-20T19:49:24.716600425-03:00","created_by":"charly vibes"}]}
{"id":"nayra-adr","title":"Add data format documentation to README","description":"Add documentation to README explaining the data format and how to create/import event data.\n\n**Sections to add:**\n\n1. **Event Format** - Required and optional fields with examples\n2. **Time Formats** - Supported formats with examples (ISO, BCE, Ma/Ga)\n3. **Dataset Structure** - Simple array vs extended format with metadata\n4. **Importing Data** - How to load JSON files\n5. **Wikidata Integration** - How to use SPARQL queries and transformer\n6. **Validation** - Error messages and how to fix common issues\n\n**Keep it concise** - Link to spec for full details rather than duplicating everything.\n\n**Ref:** openspec/specs/data-schema/spec.md\n\n**Verification:**\n1. README has Data Format section\n2. Examples are copy-pasteable and valid\n3. Links to spec work correctly","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:38.528743586-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:46:13.676470006-03:00","closed_at":"2026-01-23T21:46:13.676470006-03:00","close_reason":"Added Data Format section to README with event structure, time formats, dataset structure, and Wikidata integration","dependencies":[{"issue_id":"nayra-adr","depends_on_id":"nayra-h19","type":"blocks","created_at":"2026-01-22T00:30:11.744050826-03:00","created_by":"charly vibes"}]}
{"id":"nayra-ddl","title":"Validator end\u003cstart check should parse dates semantically","description":"The validator's end\u003cstart comparison uses string comparison, which fails for negative years and BCE dates.\n\n**Problem:**\n- `'-1184' \u003c '-1194'` lexicographically, but -1184 is actually AFTER -1194 chronologically\n- `'323 BCE' \u003c '336 BCE'` lexicographically, but 323 BCE is AFTER 336 BCE\n- Same issue with Ma/Ga notation for geological time spans\n\n**Affected code:**\n- `src/data/validator.js` lines 98-109 (INVALID_END_BEFORE_START check)\n\n**Solution:**\nUse `parseTimeQuery` from `src/core/time-parser.js` to convert dates to BigInt timestamps before comparing.\n\n**Test cases to add:**\n1. Event with start='336 BCE' end='323 BCE' should be VALID (span event)\n2. Event with start='-1194' end='-1184' should be VALID\n3. Event with start='538 Ma' end='485 Ma' should be VALID\n4. Event with start='2024' end='2020' should be INVALID\n\n**Workaround:**\nExample files currently use point events for BCE/geological spans.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T18:13:18.899472763-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:39:21.619040704-03:00","closed_at":"2026-01-23T21:39:21.619040704-03:00","close_reason":"Fixed by using parseTimeQuery for semantic date comparison instead of string comparison"}
{"id":"nayra-de8","title":"Testing \u0026 Polish for Touch Input","description":"Complete testing and polish for touch input:\n- Update test/unit/input.test.js with PointerEvent tests\n- Add integration tests for touch gestures (mock PointerEvents)\n- Test on real touch device or Chrome DevTools touch emulation\n- Verify 60 FPS maintained during pinch/pan operations\n- Verify mouse and pen input work correctly after full integration\n- Test on Safari iOS for browser back/forward gesture conflicts\n- Document touch gestures in README or help panel\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:10:00.669003032-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:09:13.170660331-03:00","closed_at":"2026-02-20T17:09:13.170660331-03:00","close_reason":"All automated tests passing (634 tests). Manual device testing is final QA step.","dependencies":[{"issue_id":"nayra-de8","depends_on_id":"nayra-eay","type":"blocks","created_at":"2026-02-06T12:10:16.781574939-03:00","created_by":"charly vibes"}]}
{"id":"nayra-dgh","title":"Phase 2: Tooltip Component","description":"Create hover tooltip component following UI pattern from searchbar.js.\n\n## Changes Required\n\n**File: src/ui/tooltip.js (NEW)**\n- Create createTooltip(container) factory\n- Return { show(), hide(), update(event, x, y), destroy() }\n- Style: #2a2a3e background, #4a4a6a border, 6px radius\n- Position: offset from cursor, clamped to viewport\n- Set pointer-events: none to avoid capturing mouse\n\n**Tests: test/unit/ui/tooltip.test.js**\n- Creates DOM element with correct styles\n- update() sets content and position\n- show()/hide() toggles visibility\n- Position clamping at viewport edges\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:15:34.296516847-03:00","created_by":"charly vibes","updated_at":"2026-02-05T17:16:50.312831681-03:00","closed_at":"2026-02-05T17:16:50.312831681-03:00","close_reason":"Phase 2 complete: Tooltip component created with TDD"}
{"id":"nayra-e8q","title":"Implement event clustering for macro zoom","description":"Cluster nearby events at macro zoom levels to reduce visual complexity.\n\n**Requirements:**\n- Group nearby events into clusters at macro zoom\n- Display cluster markers with event counts\n- Click cluster to zoom and show constituent events\n- Gradually expand clusters as user zooms in\n- Smooth transition from cluster to individual events\n\n**Acceptance Criteria:**\n- Clusters created automatically at macro zoom levels\n- Cluster markers show accurate counts\n- Click interaction zooms to reveal events\n- Smooth expansion animation during zoom\n- Performance maintained with clustering enabled\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirement: Event Clustering)\n**Related Files:** src/rendering/renderer.js, src/interaction/hit-detection.js\n**Depends On:** Level-of-detail strategies\n**Epic:** nayra-yhs","status":"closed","priority":3,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:24.613821103-03:00","created_by":"charly vibes","updated_at":"2026-02-20T14:42:47.596793691-03:00","closed_at":"2026-02-20T14:42:47.596793691-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-e8q","depends_on_id":"nayra-erc","type":"blocks","created_at":"2026-02-20T10:55:47.824558367-03:00","created_by":"charly vibes"}]}
{"id":"nayra-e9d","title":"Write tests for data validation and transformation","description":"Write comprehensive tests for the data validation and transformation components.\n\n**Test files:**\n- `src/data/validator.test.js` - Schema validation tests\n- `src/time/time-parser.test.js` - Time format parsing tests\n- `src/data/wikidata-transformer.test.js` - Wikidata transformer tests\n- `src/data/jsonld-transformer.test.js` - JSON-LD transformer tests\n\n**Test scenarios from spec:**\n\n*Validator tests:*\n- Minimal valid event (id, start, label only)\n- Missing required field → error with field name\n- Empty id → error with hint\n- Duplicate ids → error listing both\n- Invalid precision → error with allowed values\n- end \u003c start → rejection\n\n*Time parser tests:*\n- ISO 8601 datetime and date\n- Negative year (-44 → 44 BCE)\n- BCE/BC notation (case insensitive)\n- Ma/Ga geological notation\n- Year zero rejection with helpful error\n\n*Transformer tests:*\n- Wikidata URI → Q-number extraction\n- Wikidata BCE date adjustment\n- Schema.org property mapping\n- @graph array handling\n\n**Ref:** openspec/specs/data-schema/spec.md (all scenario blocks)\n\n**Verification:**\n1. All test files exist\n2. `just test` passes with no failures\n3. Coverage includes all spec scenarios","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:34.955658759-03:00","created_by":"charly vibes","updated_at":"2026-01-23T18:09:25.940908898-03:00","closed_at":"2026-01-23T18:09:25.940908898-03:00","close_reason":"All test scenarios from spec are now covered. Added missing end\u003cstart validation with 3 new tests. Total: 226 tests passing.","dependencies":[{"issue_id":"nayra-e9d","depends_on_id":"nayra-h19","type":"blocks","created_at":"2026-01-22T00:24:55.6591879-03:00","created_by":"charly vibes"},{"issue_id":"nayra-e9d","depends_on_id":"nayra-5jt","type":"blocks","created_at":"2026-01-22T00:24:55.704506366-03:00","created_by":"charly vibes"},{"issue_id":"nayra-e9d","depends_on_id":"nayra-2zs","type":"blocks","created_at":"2026-01-22T00:33:09.816314308-03:00","created_by":"charly vibes"}]}
{"id":"nayra-eay","title":"Touch Input Edge Cases \u0026 Error Handling","description":"Handle touch input edge cases and resilience:\n- Add resize and orientationchange listeners to call GestureRecognizer.reset()\n- Handle hybrid devices: use pointerType to ignore mouse events during active touch\n- Clear all pending timers in pointercancel handler\n- Validate pointerId is in active map before processing events (defensive check)\n- Write unit tests for edge case handling\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:53.682479856-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:07:19.448319759-03:00","closed_at":"2026-02-20T17:07:19.448319759-03:00","close_reason":"All edge cases already implemented and tested","dependencies":[{"issue_id":"nayra-eay","depends_on_id":"nayra-r1o","type":"blocks","created_at":"2026-02-06T12:10:16.639547032-03:00","created_by":"charly vibes"},{"issue_id":"nayra-eay","depends_on_id":"nayra-3ck","type":"blocks","created_at":"2026-02-06T12:10:16.675941486-03:00","created_by":"charly vibes"},{"issue_id":"nayra-eay","depends_on_id":"nayra-nfo","type":"blocks","created_at":"2026-02-06T12:10:16.711620031-03:00","created_by":"charly vibes"},{"issue_id":"nayra-eay","depends_on_id":"nayra-s6j","type":"blocks","created_at":"2026-02-06T12:10:16.747027074-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj","title":"Text Search \u0026 Filtering","description":"Implement comprehensive text search and category filtering functionality. Users should be able to search events by title/description, filter by categories, and navigate through results with keyboard and visual highlighting.","status":"open","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:52.978300827-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:16:52.978300827-03:00"}
{"id":"nayra-emj.1","title":"Implement text search by title and description","description":"Implement text search by title and description\n\nFull-text search with 150ms debounce, case-insensitive matching.\n\n**Files to modify:**\n- src/core/search-engine.js (create new - core search logic with debounce)\n- src/ui/searchbar.js (enhance existing - add search input handling)\n- src/core/store.js (extend - add searchQuery, searchResults, filteredEvents)\n- src/core/actions.js (create new - add SEARCH_EVENTS, CLEAR_SEARCH actions)\n\n**Implementation:**\n1. Create search function that filters events by title/description fields\n2. Add debounce wrapper (150ms delay) to prevent excessive filtering\n3. Integrate search input handler with SearchBar component\n4. Update store to track search state and filtered results\n5. Add reducer logic for search actions\n\n**Success criteria:**\n- Search input filters events in real-time with debounce\n- Case-insensitive matching works correctly\n- Empty search shows all events\n- Search works across both title and description fields\n- Performance: \u003c5ms for 10K events (excluding render)\n- Tests pass: test/unit/search-engine.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/unit/search-engine.test.js covering:\n- Basic text matching\n- Case-insensitive search\n- Debounce behavior\n- Empty query handling\n- Multi-field search\n\n**Spec reference:** openspec/specs/search-filter/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:55.914624093-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:52:37.540442027-03:00","dependencies":[{"issue_id":"nayra-emj.1","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:16:55.91617389-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.2","title":"Add real-time search result highlighting","description":"Add real-time search result highlighting\n\nVisual dimming of non-matching events, highlight matching text.\n\n**Files to modify:**\n- src/rendering/search-highlight.js (create new - highlight rendering logic)\n- src/rendering/event-renderer.js (enhance - add highlight support)\n- src/ui/searchbar.js (enhance - trigger highlight updates)\n- src/core/store.js (extend - add highlightMatches state)\n- public/styles.css (add highlight and dim styles)\n\n**Implementation:**\n1. Create highlighting function that marks matched text spans\n2. Add visual dimming (opacity 0.3) for non-matching events\n3. Add highlight styling (background: yellow, bold text) for matches\n4. Update event renderer to apply highlights dynamically\n5. Ensure highlights update on search query change\n\n**Success criteria:**\n- Non-matching events are visually dimmed\n- Matching text is highlighted with yellow background\n- Highlights update immediately on search input\n- No flickering or layout shift during highlighting\n- Performance: \u003c10ms to apply highlights to visible events\n- Tests pass: test/unit/search-highlight.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/unit/search-highlight.test.js covering:\n- Text highlighting logic\n- Dimming non-matches\n- Multiple match highlighting\n- Special character escaping\n- Performance with many matches\n\n**Spec reference:** openspec/specs/search-filter/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:56.734385102-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:52:45.071861696-03:00","dependencies":[{"issue_id":"nayra-emj.2","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:16:56.735645675-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.2","depends_on_id":"nayra-emj.1","type":"blocks","created_at":"2026-02-20T17:58:14.78140541-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.3","title":"Implement search result navigation","description":"Implement search result navigation\n\nNext/Previous buttons, Enter key navigation, result count display.\n\n**Files to modify:**\n- src/ui/search-navigation.js (create new - navigation controls component)\n- src/ui/searchbar.js (enhance - integrate navigation UI)\n- src/core/store.js (extend - add currentResultIndex, totalResults)\n- src/core/actions.js (extend - add NEXT_RESULT, PREV_RESULT, JUMP_TO_RESULT)\n- src/rendering/viewport-controller.js (enhance - pan to result)\n\n**Implementation:**\n1. Create Next/Previous button controls in search UI\n2. Add Enter key handler to jump to next result\n3. Display result count (e.g., \"3 of 15 results\")\n4. Pan viewport to center current result event\n5. Cycle through results (wrap at beginning/end)\n6. Add Shift+Enter for previous result navigation\n\n**Success criteria:**\n- Next/Previous buttons navigate through results\n- Enter key advances to next result\n- Shift+Enter goes to previous result\n- Result count displays accurately\n- Viewport pans smoothly to center result\n- Keyboard navigation works without search input focus\n- Tests pass: test/unit/search-navigation.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/unit/search-navigation.test.js covering:\n- Next/Previous navigation\n- Enter/Shift+Enter handlers\n- Result count accuracy\n- Wrap-around behavior\n- Viewport panning\n\n**Spec reference:** openspec/specs/search-filter/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:57.53096367-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:52:53.608570605-03:00","dependencies":[{"issue_id":"nayra-emj.3","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:16:57.53180333-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.3","depends_on_id":"nayra-emj.1","type":"blocks","created_at":"2026-02-20T17:58:15.725094047-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.4","title":"Create category filtering UI","description":"Create category filtering UI\n\nSingle and multiple category filters with OR/AND logic.\n\n**Files to modify:**\n- src/ui/category-filter.js (create new - category filter component)\n- src/core/filter-engine.js (create new - category filtering logic)\n- src/core/store.js (extend - add selectedCategories, filterMode)\n- src/core/actions.js (extend - add TOGGLE_CATEGORY, SET_FILTER_MODE)\n- public/styles.css (add category filter styles)\n\n**Implementation:**\n1. Extract unique categories from loaded events\n2. Create checkbox/tag UI for category selection\n3. Add OR/AND mode toggle (OR: match any, AND: match all)\n4. Implement category filtering logic\n5. Update filtered events when categories change\n6. Add \"Clear all\" button for quick reset\n\n**Success criteria:**\n- Categories are auto-detected from event data\n- Checkbox UI allows multi-select\n- OR mode shows events matching ANY selected category\n- AND mode shows events matching ALL selected categories\n- Filter updates in real-time on selection change\n- Empty selection shows all events\n- Tests pass: test/unit/category-filter.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/unit/category-filter.test.js covering:\n- Category extraction\n- OR logic filtering\n- AND logic filtering\n- Empty selection behavior\n- Category toggle actions\n- Clear all functionality\n\n**Spec reference:** openspec/specs/search-filter/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:58.210172173-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:01.831896257-03:00","dependencies":[{"issue_id":"nayra-emj.4","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:16:58.21146702-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.5","title":"Implement combined search and category filtering","description":"Implement combined search and category filtering\n\nAllow simultaneous text search and category filters.\n\n**Files to modify:**\n- src/core/filter-engine.js (enhance - combine search and category filters)\n- src/core/store.js (extend - unified filtering state)\n- src/core/actions.js (enhance - coordinated filter updates)\n- src/ui/searchbar.js (enhance - show active filter count)\n- src/rendering/event-renderer.js (enhance - render combined results)\n\n**Implementation:**\n1. Create unified filter pipeline: categories → text search\n2. Apply category filter first, then text search on results\n3. Update UI to show both active filters\n4. Add badge showing total active filter count\n5. Ensure filter state is synchronized\n6. Add \"Clear all filters\" button\n\n**Success criteria:**\n- Category and text filters work simultaneously\n- Filters are applied in correct order (category → search)\n- UI shows active filter count badge\n- Clear all filters button resets both\n- Performance: \u003c10ms for combined filtering on 10K events\n- Filter count updates in real-time\n- Tests pass: test/integration/combined-filtering.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/integration/combined-filtering.test.js covering:\n- Category + text search combination\n- Filter order correctness\n- Clear all filters\n- Empty results handling\n- Performance benchmarks\n- State synchronization\n\n**Spec reference:** openspec/specs/search-filter/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:58.969986335-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:10.477164221-03:00","dependencies":[{"issue_id":"nayra-emj.5","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:16:58.970948546-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.5","depends_on_id":"nayra-emj.1","type":"blocks","created_at":"2026-02-20T17:58:16.407444563-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.5","depends_on_id":"nayra-emj.4","type":"blocks","created_at":"2026-02-20T17:58:17.546873148-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.6","title":"Add search state URL persistence","description":"Add search state URL persistence\n\nEncode search/filter state in URL hash for sharing.\n\n**Files to modify:**\n- src/core/url-state.js (create new - URL hash serialization/deserialization)\n- src/core/store.js (enhance - sync state with URL hash)\n- src/core/actions.js (extend - add RESTORE_FROM_URL action)\n- src/main.js (enhance - initialize state from URL on load)\n- src/utils/url-encoding.js (create new - URL-safe encoding utilities)\n\n**Implementation:**\n1. Create URL hash format: #q=search\u0026cats=cat1,cat2\u0026mode=or\n2. Encode search query, categories, and filter mode to hash\n3. Update URL hash on filter state changes (debounced 500ms)\n4. Parse URL hash on page load and restore state\n5. Handle invalid/malformed hash gracefully\n6. Support browser back/forward navigation\n\n**Success criteria:**\n- URL hash updates when filters change (debounced)\n- Page reload restores filters from URL hash\n- Sharing URL preserves search/filter state\n- Browser back/forward buttons work correctly\n- Invalid hash doesn't crash app (graceful fallback)\n- Hash format is readable and URL-safe\n- Tests pass: test/unit/url-state.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/unit/url-state.test.js covering:\n- Hash encoding/decoding\n- State restoration from URL\n- Invalid hash handling\n- Special character encoding\n- Browser navigation events\n- Debounce behavior\n\n**Spec reference:** openspec/specs/search-filter/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:16:59.79221024-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:20.311066671-03:00","dependencies":[{"issue_id":"nayra-emj.6","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:16:59.793008723-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.7","title":"Add ARIA announcements for search results","description":"Add ARIA announcements for search results\n\nScreen reader support for result counts and navigation.\n\n**Files to modify:**\n- src/accessibility/aria-announcer.js (create new - live region announcements)\n- src/ui/searchbar.js (enhance - trigger announcements on search)\n- src/ui/search-navigation.js (enhance - announce navigation)\n- src/core/store.js (enhance - track announcement state)\n- public/index.html (add ARIA live region)\n\n**Implementation:**\n1. Create ARIA live region for announcements (polite mode)\n2. Announce result count on search: \"15 results found\"\n3. Announce navigation: \"Result 3 of 15\"\n4. Announce filter changes: \"Category filter applied, 8 results\"\n5. Debounce announcements (500ms) to avoid spam\n6. Clear announcements when search is cleared\n\n**Success criteria:**\n- Screen readers announce result counts\n- Navigation changes are announced\n- Announcements are polite (don't interrupt)\n- No duplicate or spammy announcements\n- Announcements are clear and concise\n- Works with NVDA, JAWS, and VoiceOver\n- Tests pass: test/accessibility/aria-announcements.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/accessibility/aria-announcements.test.js covering:\n- Live region creation\n- Result count announcements\n- Navigation announcements\n- Debounce behavior\n- Announcement clearing\n- Edge cases (0 results, etc.)\n\n**Spec reference:** openspec/specs/search-filter/spec.md, openspec/specs/accessibility/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:00.501130645-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:28.993096354-03:00","dependencies":[{"issue_id":"nayra-emj.7","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:17:00.502316316-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.7","depends_on_id":"nayra-emj.1","type":"blocks","created_at":"2026-02-20T17:58:18.16864655-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.7","depends_on_id":"nayra-emj.2","type":"blocks","created_at":"2026-02-20T17:58:18.954780325-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.7","depends_on_id":"nayra-emj.3","type":"blocks","created_at":"2026-02-20T17:58:19.769467625-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.7","depends_on_id":"nayra-tnj.2","type":"blocks","created_at":"2026-02-20T17:59:15.921568161-03:00","created_by":"charly vibes"}]}
{"id":"nayra-emj.8","title":"Add search performance optimization","description":"Add search performance optimization\n\nInverted index for 100K+ events, measure search speed.\n\n**Files to modify:**\n- src/core/inverted-index.js (create new - inverted index implementation)\n- src/core/search-engine.js (enhance - use inverted index for search)\n- src/data/data-loader.js (enhance - build index on data load)\n- test/performance/search-benchmark.test.js (create new - perf tests)\n- docs/performance.md (create new - document search performance)\n\n**Implementation:**\n1. Build inverted index mapping tokens → event IDs\n2. Tokenize text: lowercase, split on word boundaries\n3. Store index in Map for O(1) token lookup\n4. Update search to query index instead of linear scan\n5. Benchmark search performance: 10K, 50K, 100K events\n6. Target: \u003c50ms search time for 100K events\n7. Lazy index updates on data changes\n\n**Success criteria:**\n- Inverted index built on data load\n- Search queries index for fast lookups\n- Performance targets met:\n  - 10K events: \u003c10ms\n  - 50K events: \u003c25ms\n  - 100K events: \u003c50ms\n- Index updates when data changes\n- Memory usage acceptable (\u003c20MB for 100K events)\n- Tests pass: test/performance/search-benchmark.test.js\n\n**TDD Requirement:**\nWrite tests FIRST in test/performance/search-benchmark.test.js covering:\n- Index building performance\n- Search query performance at scale\n- Memory usage measurements\n- Index update performance\n- Comparison: indexed vs linear search\n- Edge cases: empty index, single token\n\n**Spec reference:** openspec/specs/search-filter/spec.md, openspec/specs/performance/spec.md","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:01.270507455-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:38.759991358-03:00","dependencies":[{"issue_id":"nayra-emj.8","depends_on_id":"nayra-emj","type":"parent-child","created_at":"2026-02-20T17:17:01.272161598-03:00","created_by":"charly vibes"},{"issue_id":"nayra-emj.8","depends_on_id":"nayra-emj.1","type":"blocks","created_at":"2026-02-20T17:58:20.64749506-03:00","created_by":"charly vibes"}]}
{"id":"nayra-eoh","title":"Add keyboard shortcut to jump to today and reset zoom","description":"Add a keyboard shortcut (e.g., Home or 'T') to quickly navigate back to the current time and reset zoom to a reasonable default. Essential for UX when exploring deep time.","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T20:55:35.444058462-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:58:25.475677781-03:00","closed_at":"2026-01-21T20:58:25.475677781-03:00","close_reason":"Implemented: Home and 'h' keys jump to today with default zoom"}
{"id":"nayra-eoz","title":"Add timescales view to help menu","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T22:55:59.726133902-03:00","created_by":"charly vibes","updated_at":"2026-01-21T22:58:13.287808164-03:00","closed_at":"2026-01-21T22:58:13.287808164-03:00","close_reason":"Implemented tabbed help menu with Shortcuts and Timescales views, arrow key navigation"}
{"id":"nayra-erc","title":"Implement level-of-detail rendering strategies","description":"Adapt rendering detail based on viewport zoom level.\n\n**Requirements:**\n- **Macro view** (centuries): Only high-priority events, cluster markers with counts, no individual labels\n- **Meso view** (decades): Medium-priority events, simplified labels, duration bars may become points\n- **Micro view** (days/hours): All events visible, full detailed labels, exact time spans\n- Smooth transitions between LOD levels with no jarring changes\n\n**Acceptance Criteria:**\n- Three distinct LOD levels implemented\n- Rendering performance maintained at all zoom levels\n- Transitions feel natural and smooth\n- Configurable thresholds for LOD switching\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirement: Level of Detail Strategies)\n**Related Files:** src/rendering/renderer.js\n**Epic:** nayra-yhs","status":"closed","priority":3,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:20.571822736-03:00","created_by":"charly vibes","updated_at":"2026-02-20T14:17:54.262769686-03:00","closed_at":"2026-02-20T14:17:54.262769686-03:00","close_reason":"Closed"}
{"id":"nayra-exz","title":"Add keyboard shortcuts for zoom control (fit to content, zoom in/out)","description":"Implement keyboard shortcuts to control zoom levels:\n- Fit to content/zoom to fit all events\n- Zoom in/out\n- Reset zoom to default\n- Possibly zoom to selection\n\nShould integrate with existing keyboard navigation infrastructure and follow WCAG accessibility guidelines.","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-02-20T19:07:35.505671165-03:00","created_by":"charly vibes","updated_at":"2026-02-20T20:16:08.786837374-03:00","closed_at":"2026-02-20T20:16:08.786837374-03:00","close_reason":"Closed"}
{"id":"nayra-fhm","title":"Integrate event layout with renderer","description":"Integrate the event layout system with the existing canvas renderer.\n\n**Requirements:**\n- Replace hardcoded y position in renderer.js with lane-based positioning\n- Trigger layout recalculation on viewport changes (pan, zoom, resize)\n- Update drawEvent() to use computed lane positions\n- Maintain 60 FPS performance\n- Handle dynamic canvas resizing\n\n**Acceptance Criteria:**\n- Events render in their assigned lanes\n- No overlapping events at same Y position\n- Layout updates smoothly during interaction\n- FPS counter stays ≥55 FPS with 10,000 events\n- High-DPI displays handled correctly\n\n**Related Spec:** openspec/specs/event-layout/spec.md\n**Related Files:** src/rendering/renderer.js (line 108: hardcoded y position)\n**Depends On:** Greedy interval coloring, lane positioning, spatial hash\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:34.590549393-03:00","created_by":"charly vibes","updated_at":"2026-02-20T12:04:05.072126306-03:00","closed_at":"2026-02-20T12:04:05.072126306-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-fhm","depends_on_id":"nayra-4kv","type":"blocks","created_at":"2026-02-20T10:55:48.077490747-03:00","created_by":"charly vibes"},{"issue_id":"nayra-fhm","depends_on_id":"nayra-vyw","type":"blocks","created_at":"2026-02-20T10:55:48.115941244-03:00","created_by":"charly vibes"},{"issue_id":"nayra-fhm","depends_on_id":"nayra-9wc","type":"blocks","created_at":"2026-02-20T10:55:48.151039643-03:00","created_by":"charly vibes"}]}
{"id":"nayra-g52","title":"Browser Compatibility Testing","description":"Implement comprehensive browser compatibility testing and graceful degradation. Ensure the timeline works across all target browsers with clear error messages for unsupported environments.","status":"open","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:17.563648651-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:17:17.563648651-03:00"}
{"id":"nayra-g52.1","title":"Add startup feature detection","description":"Implement feature detection for required browser APIs (Canvas2D, Web Workers, ResizeObserver).\n\nFiles:\n- src/utils/feature-detection.js (create/update feature detection module)\n- src/index.js (integrate detection at startup)\n- test/unit/feature-detection.test.js (TDD unit tests)\n- test/e2e/browser-support.spec.js (E2E validation)\n\nSuccess Criteria:\n- Detect Canvas2D API support\n- Detect Web Workers support\n- Detect ResizeObserver support\n- Return structured capability object\n- All tests passing (TDD approach)\n\nTDD Requirement: Write tests first, then implementation.\nSpec: openspec/specs/browser-compatibility/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:28.688424517-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:54:29.347760578-03:00","dependencies":[{"issue_id":"nayra-g52.1","depends_on_id":"nayra-g52","type":"parent-child","created_at":"2026-02-20T17:17:28.689409361-03:00","created_by":"charly vibes"}]}
{"id":"nayra-g52.2","title":"Create graceful error messages","description":"Create user-friendly error messaging UI for unsupported browsers.\n\nFiles:\n- src/ui/browser-error.js (create error UI component)\n- src/ui/browser-error.css (styling for error messages)\n- src/index.js (integrate error display on detection failure)\n- test/unit/browser-error.test.js (TDD unit tests)\n- test/e2e/browser-error.spec.js (visual regression tests)\n\nSuccess Criteria:\n- Clear error messages identifying missing features\n- Fallback recommendations (suggest supported browsers)\n- Graceful degradation without crashes\n- Accessible error UI (ARIA labels, keyboard navigation)\n- All tests passing (TDD approach)\n\nTDD Requirement: Write tests first, then implementation.\nSpec: openspec/specs/browser-compatibility/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:30.095348158-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:54:32.957371982-03:00","dependencies":[{"issue_id":"nayra-g52.2","depends_on_id":"nayra-g52","type":"parent-child","created_at":"2026-02-20T17:17:30.096190083-03:00","created_by":"charly vibes"},{"issue_id":"nayra-g52.2","depends_on_id":"nayra-g52.1","type":"blocks","created_at":"2026-02-20T17:58:41.39112934-03:00","created_by":"charly vibes"}]}
{"id":"nayra-g52.3","title":"Implement automated cross-browser testing","description":"Set up cross-browser testing infrastructure with Playwright.\n\nFiles:\n- playwright.config.js (configure browser matrix)\n- test/e2e/cross-browser.spec.js (cross-browser test suite)\n- test/e2e/fixtures/ (browser-specific fixtures)\n- .github/workflows/browser-tests.yml (CI integration)\n- package.json (add Playwright dependencies)\n\nSuccess Criteria:\n- Test on Chrome, Firefox, Safari (WebKit)\n- Automated test execution in CI\n- Screenshot comparison for visual regressions\n- Performance benchmarks across browsers\n- All tests passing on all browsers (TDD approach)\n\nTDD Requirement: Write tests first, then implementation.\nSpec: openspec/specs/browser-compatibility/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:31.231168119-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:54:36.143151897-03:00","dependencies":[{"issue_id":"nayra-g52.3","depends_on_id":"nayra-g52","type":"parent-child","created_at":"2026-02-20T17:17:31.232226582-03:00","created_by":"charly vibes"}]}
{"id":"nayra-g52.4","title":"Add high-DPI device testing","description":"Implement high-DPI display testing procedures and validation.\n\nFiles:\n- test/e2e/high-dpi.spec.js (DPI-specific test suite)\n- src/rendering/dpi-scaling.js (DPI detection and scaling logic)\n- test/visual/high-dpi-snapshots/ (visual regression baselines)\n- playwright.config.js (configure DPI test scenarios)\n\nSuccess Criteria:\n- Test at 1x, 2x, 3x device pixel ratios\n- Validate canvas scaling correctness\n- Ensure crisp rendering at all DPI levels\n- No pixelation or blurring artifacts\n- Performance acceptable at high DPI\n- All tests passing (TDD approach)\n\nTDD Requirement: Write tests first, then implementation.\nSpec: openspec/specs/browser-compatibility/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:32.602304304-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:54:39.976264242-03:00","dependencies":[{"issue_id":"nayra-g52.4","depends_on_id":"nayra-g52","type":"parent-child","created_at":"2026-02-20T17:17:32.603187637-03:00","created_by":"charly vibes"}]}
{"id":"nayra-g52.5","title":"Document browser support matrix","description":"Document browser support matrix and compatibility guidelines.\n\nFiles:\n- README.md (add Browser Compatibility section)\n- docs/browser-support.md (detailed compatibility matrix)\n- docs/troubleshooting.md (browser-specific issues)\n- package.json (add browserslist configuration)\n\nSuccess Criteria:\n- Clear minimum browser versions listed\n- Feature availability matrix (Canvas2D, Workers, ResizeObserver)\n- Known issues and workarounds documented\n- Instructions for testing locally\n- Links to feature detection and error handling code\n- Validation that docs match implementation (TDD approach)\n\nTDD Requirement: Validate documentation accuracy through automated tests.\nSpec: openspec/specs/browser-compatibility/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:33.767949119-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:54:45.857256934-03:00","dependencies":[{"issue_id":"nayra-g52.5","depends_on_id":"nayra-g52","type":"parent-child","created_at":"2026-02-20T17:17:33.769073355-03:00","created_by":"charly vibes"}]}
{"id":"nayra-g52.6","title":"Test system preference handling","description":"Validate browser compatibility implementation against specification.\n\nFiles:\n- test/e2e/compliance.spec.js (spec compliance tests)\n- test/integration/browser-compatibility.test.js (integration tests)\n- openspec/specs/browser-compatibility/spec.md (reference spec)\n- test/coverage/browser-compat-report.html (coverage report)\n\nSuccess Criteria:\n- All feature detection requirements met per spec\n- Error messaging matches spec guidelines\n- Cross-browser tests cover all specified browsers\n- High-DPI handling validated per spec\n- Documentation complete and accurate\n- 100% test coverage for compatibility code (TDD approach)\n\nTDD Requirement: Comprehensive test coverage validates all spec requirements.\nSpec: openspec/specs/browser-compatibility/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:34.880241348-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:54:47.185671665-03:00","dependencies":[{"issue_id":"nayra-g52.6","depends_on_id":"nayra-g52","type":"parent-child","created_at":"2026-02-20T17:17:34.881611206-03:00","created_by":"charly vibes"}]}
{"id":"nayra-h19","title":"Implement schema validator in src/data/validator.js","description":"Implement a schema validator that validates event data against the JSON Schema and provides clear error messages.\n\n**Location:** `src/data/validator.js`\n\n**Requirements (from spec lines 268-317):**\n- Use ajv or similar JSON Schema validation library\n- Validate: required fields present, id non-empty and unique, end \u003e= start, priority 0-4, precision enum\n- Error format per spec:\n  ```\n  Validation Error: [RULE_CODE]\n    Event: [id or index]\n    Field: [field name]\n    Value: [provided value]\n    Expected: [what was expected]\n    Hint: [how to fix]\n  ```\n- Support partial import: valid events imported, invalid skipped with summary\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-validation-and-error-reporting\n\n**Verification:**\n1. `import { validate } from './validator.js'` works\n2. validate([{id:'1', start:'2024', label:'Test'}]) returns success\n3. validate([{id:'', start:'2024', label:'Test'}]) returns error with hint\n4. Run: `just test` passes validator tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:19.316299908-03:00","created_by":"charly vibes","updated_at":"2026-01-22T20:00:48.788366128-03:00","closed_at":"2026-01-22T20:00:48.788366128-03:00","close_reason":"Implemented schema validator with TDD - 18 passing tests","dependencies":[{"issue_id":"nayra-h19","depends_on_id":"nayra-7wn","type":"blocks","created_at":"2026-01-22T00:24:55.609977429-03:00","created_by":"charly vibes"}]}
{"id":"nayra-hkm","title":"Context Menus","description":"Implement right-click and long-press context menus for quick event actions. Users should be able to access common actions like 'Zoom to event', 'Show details', and 'Copy link' via context menu.","status":"open","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:07.334333089-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:51:31.673190243-03:00"}
{"id":"nayra-hkm.1","title":"Implement right-click context menu detection","description":"Handle contextmenu event, prevent default browser menu\n\nFILES TO MODIFY:\n- src/interaction/input.js - Add contextmenu event listener\n- src/ui/context-menu.js - Create new module for context menu logic\n\nSUCCESS CRITERIA:\n- Right-click on event prevents browser context menu\n- contextmenu event captured and preventDefault() called\n- Event position (clientX, clientY) stored for menu positioning\n- Event target identified (event node, timeline background, etc.)\n\nTDD REQUIREMENT:\n- Write tests first in tests/interaction/context-menu.test.js\n- Test contextmenu event listener registration\n- Test preventDefault() is called on contextmenu\n- Test position capture from mouse event\n- Mock event target identification\n\nSPEC REFERENCE:\n- openspec/specs/user-interaction/spec.md (Context Menu section)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:10.25215309-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:13.935861528-03:00","dependencies":[{"issue_id":"nayra-hkm.1","depends_on_id":"nayra-hkm","type":"parent-child","created_at":"2026-02-20T17:17:10.253127514-03:00","created_by":"charly vibes"}]}
{"id":"nayra-hkm.2","title":"Create context menu UI component","description":"Popover with action list, positioned near cursor/touch point\n\nFILES TO MODIFY:\n- src/ui/context-menu.js - Create ContextMenu component class\n- src/ui/styles/context-menu.css - Create new stylesheet\n- src/ui/timeline-view.js - Integrate context menu into view\n\nSUCCESS CRITERIA:\n- Popover renders as absolutely positioned div\n- Menu contains action list (\u003cul\u003e/\u003cli\u003e structure)\n- Positioned at cursor/touch coordinates\n- Click outside closes menu\n- Visual styling matches design (card with shadow, rounded corners)\n- Menu items have hover states\n\nTDD REQUIREMENT:\n- Write tests first in tests/ui/context-menu.test.js\n- Test menu DOM structure creation\n- Test menu visibility toggle\n- Test click-outside detection and closure\n- Test menu item rendering from action list\n- Mock DOM and event interactions\n\nSPEC REFERENCE:\n- openspec/specs/user-interaction/spec.md (Context Menu UI)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:10.960437838-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:20.100480114-03:00","dependencies":[{"issue_id":"nayra-hkm.2","depends_on_id":"nayra-hkm","type":"parent-child","created_at":"2026-02-20T17:17:10.961997042-03:00","created_by":"charly vibes"},{"issue_id":"nayra-hkm.2","depends_on_id":"nayra-hkm.1","type":"blocks","created_at":"2026-02-20T17:58:35.491929177-03:00","created_by":"charly vibes"}]}
{"id":"nayra-hkm.3","title":"Add context menu actions","description":"Zoom to event, Show details, Copy link to event\n\nFILES TO MODIFY:\n- src/ui/context-menu.js - Add action definitions and handlers\n- src/ui/timeline-view.js - Connect actions to view methods\n- src/core/navigation.js - Implement zoom-to-event logic\n- src/ui/event-details-panel.js - Show details panel\n\nCONTEXT MENU ACTIONS:\n1. \"Zoom to Event\" - Centers and zooms to fit event bounds\n2. \"Show Details\" - Opens side panel with event metadata\n3. \"Copy Link\" - Copies shareable URL with event ID to clipboard\n4. \"---\" (separator) - Visual divider between action groups\n5. Additional actions: \"Edit Event\", \"Delete Event\" (future)\n\nSUCCESS CRITERIA:\n- Action list populated based on context (event vs background)\n- Each action has icon, label, and keyboard shortcut hint\n- \"Zoom to Event\" triggers smooth zoom/pan animation\n- \"Show Details\" opens details panel with event data\n- \"Copy Link\" writes URL to clipboard and shows confirmation\n- Menu closes after action execution\n\nTDD REQUIREMENT:\n- Write tests first in tests/ui/context-menu-actions.test.js\n- Test action handler registration\n- Test zoom calculation for event bounds\n- Test details panel opening with correct event data\n- Test clipboard API integration\n- Mock window.navigator.clipboard\n\nSPEC REFERENCE:\n- openspec/specs/user-interaction/spec.md (Context Menu Actions)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:11.840883884-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:27.885098766-03:00","dependencies":[{"issue_id":"nayra-hkm.3","depends_on_id":"nayra-hkm","type":"parent-child","created_at":"2026-02-20T17:17:11.84187558-03:00","created_by":"charly vibes"},{"issue_id":"nayra-hkm.3","depends_on_id":"nayra-hkm.2","type":"blocks","created_at":"2026-02-20T17:58:36.336604453-03:00","created_by":"charly vibes"}]}
{"id":"nayra-hkm.4","title":"Connect long-press to context menu","description":"Trigger context menu on long-press (already detected)\n\nFILES TO MODIFY:\n- src/interaction/input.js - Connect existing long-press detection to context menu\n- src/ui/context-menu.js - Add touch-specific positioning logic\n\nCONNECTION TO EXISTING CODE:\n- Long-press detection already exists in input.js (via touch gesture system)\n- Need to emit 'contextmenu' or custom 'long-press' event\n- Touch point coordinates should be used for menu positioning\n\nSUCCESS CRITERIA:\n- Long-press on event (500ms threshold) triggers context menu\n- Touch coordinates used for menu position\n- Prevents default touch context menu on mobile browsers\n- Visual feedback during long-press (optional haptic if supported)\n- Works on both mobile and desktop touch devices\n\nTDD REQUIREMENT:\n- Write tests first in tests/interaction/long-press-context.test.js\n- Test long-press event triggers context menu\n- Test touch coordinate extraction\n- Test preventDefault on touchstart/touchend\n- Mock touch events with timestamps\n- Test integration with existing gesture detection\n\nSPEC REFERENCE:\n- openspec/specs/user-interaction/spec.md (Touch Gestures, Context Menu)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:12.431275693-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:34.755021956-03:00","dependencies":[{"issue_id":"nayra-hkm.4","depends_on_id":"nayra-hkm","type":"parent-child","created_at":"2026-02-20T17:17:12.432253904-03:00","created_by":"charly vibes"},{"issue_id":"nayra-hkm.4","depends_on_id":"nayra-hkm.2","type":"blocks","created_at":"2026-02-20T17:58:37.152184975-03:00","created_by":"charly vibes"}]}
{"id":"nayra-hkm.5","title":"Implement context menu positioning logic","description":"Handle edge cases (near viewport edges)\n\nFILES TO MODIFY:\n- src/ui/context-menu.js - Add positioning algorithm\n- src/utils/viewport.js - Add viewport bounds utilities\n\nPOSITIONING LOGIC:\n- Default: position menu top-left at cursor coordinates\n- If menu extends beyond right edge: flip to left-aligned (cursor - menuWidth)\n- If menu extends beyond bottom edge: flip to top-aligned (cursor - menuHeight)\n- If menu extends beyond both: use corner strategy (top-right, bottom-left, etc.)\n- Maintain minimum padding from viewport edges (8px)\n- Account for scrollbars and browser chrome\n\nSUCCESS CRITERIA:\n- Menu never renders outside viewport bounds\n- All menu items remain clickable/accessible\n- Position calculation accounts for menu dimensions\n- Works at all zoom levels and viewport sizes\n- Smooth repositioning (no visible jumps)\n- Responsive to window resize while open\n\nTDD REQUIREMENT:\n- Write tests first in tests/ui/context-menu-positioning.test.js\n- Test positioning at viewport corners (top-left, top-right, bottom-left, bottom-right)\n- Test positioning at viewport edges (top, right, bottom, left)\n- Test positioning at center (normal case)\n- Test menu dimensions calculation\n- Mock viewport dimensions and scroll position\n\nSPEC REFERENCE:\n- openspec/specs/user-interaction/spec.md (Context Menu Positioning)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:13.19354156-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:43.062644255-03:00","dependencies":[{"issue_id":"nayra-hkm.5","depends_on_id":"nayra-hkm","type":"parent-child","created_at":"2026-02-20T17:17:13.194358888-03:00","created_by":"charly vibes"},{"issue_id":"nayra-hkm.5","depends_on_id":"nayra-hkm.2","type":"blocks","created_at":"2026-02-20T17:58:37.952600833-03:00","created_by":"charly vibes"}]}
{"id":"nayra-hkm.6","title":"Add context menu keyboard accessibility","description":"Arrow key navigation, Enter to activate, Escape to close\n\nFILES TO MODIFY:\n- src/ui/context-menu.js - Add keyboard event handlers\n- src/interaction/input.js - Register keyboard shortcuts for context menu\n- src/ui/styles/context-menu.css - Add focus/selection styles\n\nKEYBOARD NAVIGATION:\n- ArrowDown: Move to next menu item (wrap to first at end)\n- ArrowUp: Move to previous menu item (wrap to last at start)\n- Enter/Space: Activate selected menu item\n- Escape: Close menu without action\n- Tab: Move to next focusable item (or close menu)\n- Letter keys: Quick navigation to items starting with that letter\n\nSUCCESS CRITERIA:\n- Arrow keys navigate through menu items with visual focus indicator\n- Enter/Space triggers selected action and closes menu\n- Escape closes menu and returns focus to timeline\n- Tab key behavior follows accessibility best practices\n- Focus visible via outline or background highlight\n- Skip over disabled/separator items during navigation\n- Screen reader announces menu items and selection\n\nTDD REQUIREMENT:\n- Write tests first in tests/ui/context-menu-keyboard.test.js\n- Test arrow key navigation (up/down/wrap)\n- Test Enter/Space action activation\n- Test Escape menu closure\n- Test focus restoration after close\n- Test disabled item skipping\n- Mock keyboard events and focus management\n\nSPEC REFERENCE:\n- openspec/specs/user-interaction/spec.md (Keyboard Navigation, Accessibility)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:13.902730158-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:49.887346773-03:00","dependencies":[{"issue_id":"nayra-hkm.6","depends_on_id":"nayra-hkm","type":"parent-child","created_at":"2026-02-20T17:17:13.903505147-03:00","created_by":"charly vibes"},{"issue_id":"nayra-hkm.6","depends_on_id":"nayra-hkm.2","type":"blocks","created_at":"2026-02-20T17:58:38.760963318-03:00","created_by":"charly vibes"},{"issue_id":"nayra-hkm.6","depends_on_id":"nayra-30a.6","type":"blocks","created_at":"2026-02-20T17:59:16.598377726-03:00","created_by":"charly vibes"}]}
{"id":"nayra-i5j","title":"Wire up focus manager to enable Tab navigation through events","description":"## Problem\n\nTab navigation currently cycles through UI controls (canvas, zoom buttons, help button) instead of timeline events. The focus management system was implemented but never integrated into main.js.\n\n## Root Cause\n\nThe focusManager was created in commit dabbc88 and Tab key handlers were added to input.js, but:\n- main.js never creates a focusManager instance\n- focusManager is never passed to initInput()\n- Result: focusManager is null at runtime, so Tab handlers never execute\n\n## Current Behavior\n- Tab/Shift+Tab uses browser's default DOM navigation\n- Timeline events are not keyboard-navigable\n- Keyboard navigation epic (nayra-30a) was closed but integration was incomplete\n\n## Expected Behavior  \n- Tab/Shift+Tab navigates chronologically through timeline events\n- Focus indicators visible on canvas\n- Auto-pan keeps focused event in viewport\n- ARIA announcements for screen readers\n- UI controls optionally removed from tab order\n\n## Files to Modify\n- src/main.js - Create focusManager, add ARIA live region, pass to initInput\n- index.html - Add ARIA live region element for screen reader announcements\n- src/ui/zoom-controls.js - Optionally add tabindex=\"-1\" to remove from tab order\n- src/ui/help-button.js - Optionally add tabindex=\"-1\" to remove from tab order\n\n## Implementation Steps\n1. Add ARIA live region to index.html\n2. Import createFocusManager in main.js\n3. Select/create ARIA live element in main.js\n4. Instantiate focusManager with store and ARIA element\n5. Pass focusManager as 4th param to initInput()\n6. Test Tab navigation through events\n7. Decide if zoom/help buttons should be in tab order\n8. Update tests if needed\n\n## Success Criteria\n- Tab moves focus to next event chronologically\n- Shift+Tab moves focus to previous event\n- Visual focus indicator appears on focused event\n- Viewport auto-pans to show focused event\n- ARIA live region announces focused event for screen readers\n- Browser's default tab navigation is prevented when on canvas\n\n## References\n- Focus manager: src/interaction/focus-manager.js\n- Tab handlers: src/interaction/input.js:510-518\n- Closed epic: nayra-30a (Keyboard Navigation)\n- Related commit: dabbc88 (focus manager creation)\n- Related commit: 978d489 (canvas focusable - partial fix)","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-02-20T20:20:13.557426594-03:00","created_by":"charly vibes","updated_at":"2026-02-20T20:37:49.626576949-03:00","closed_at":"2026-02-20T20:37:49.626576949-03:00","close_reason":"Focus manager successfully integrated. Tab navigation now works through timeline events with visual indicators and ARIA announcements."}
{"id":"nayra-k32","title":"Create GitHub Action for GitHub Pages deployment","description":"Create a GitHub Action workflow to automatically deploy the application to GitHub Pages on push to main branch.\n\n## Acceptance Criteria\n- Workflow triggers on push to main\n- Builds the project and deploys to GitHub Pages\n- Properly configures base URL for GitHub Pages\n\n## Verification\n1. Create .github/workflows/deploy.yml\n2. Push to a branch and open PR\n3. Check Actions tab runs successfully\n4. Merge to main\n5. Verify site deployed to GitHub Pages\n\n## Approach\nTest by pushing workflow and observing results. Unit tests not applicable for CI/CD workflows.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-21T21:16:51.362909206-03:00","created_by":"charly vibes","updated_at":"2026-01-21T21:42:15.929207633-03:00","closed_at":"2026-01-21T21:42:15.929207633-03:00","close_reason":"Closed"}
{"id":"nayra-le9","title":"Event Information Visualization","description":"Implement event information visualization: tooltips on hover (500ms delay) and detail panels on selection. Enables users to see contextual information about timeline events.\n\n## Desired End State\n- Tooltip appears 500ms after hovering an event, showing title + time\n- Tooltip hides immediately on mouse-out\n- Detail panel opens on event selection, showing full event info\n- Escape key closes detail panel (event remains selected)\n\n## Verification\n- `just test` passes\n- Hover event → wait 500ms → tooltip appears\n- Click event → detail panel shows full info\n- Escape closes panel\n\n## References\n- Plan: plans/2026-02-05-event-info-visualization.md\n- Research: research/2026-02-05-event-information-visualization.md\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:09:08.060731115-03:00","created_by":"charly vibes","updated_at":"2026-02-05T17:20:48.427395019-03:00","closed_at":"2026-02-05T17:20:48.427395019-03:00","close_reason":"Epic complete: Event Information Visualization fully implemented"}
{"id":"nayra-le9.1","title":"Phase 1: Time Formatting Utility","description":"Create shared time formatting for user-facing display in tooltips and panels.\n\n## Changes Required\n\n**File: `src/ui/format.js` (NEW)**\n- Create `formatTimeRange(event)` function\n- Handle deep time (Ga, Ma), historical dates, precision\n- Export for use by tooltip and panel\n\n**Tests: `test/unit/ui/format.test.js`**\n- Test Ga/Ma formatting (4.5 Ga, 100 Ma)\n- Test year formatting (2024, 500 BCE)\n- Test time ranges with start/end\n- Test precision hints (approximate, exact)\n\n## Success Criteria\n- [ ] Unit tests pass: `just test test/unit/ui/format.test.js`\n- [ ] Build succeeds: `just build`\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:09:16.072233597-03:00","created_by":"charly vibes","updated_at":"2026-02-05T17:14:54.894249566-03:00","closed_at":"2026-02-05T17:14:54.894249566-03:00","close_reason":"Phase 1 complete: Time formatting utility created with TDD","dependencies":[{"issue_id":"nayra-le9.1","depends_on_id":"nayra-le9","type":"parent-child","created_at":"2026-02-05T17:09:16.075198395-03:00","created_by":"charly vibes"}]}
{"id":"nayra-le9.2","title":"Phase 2: Tooltip Component","description":"Create hover tooltip following UI component pattern.\n\n## Changes Required\n\n**File: `src/ui/tooltip.js` (NEW)**\n- Create `createTooltip(container)` factory\n- Return `{ show(), hide(), update(event, x, y), destroy() }`\n- Style: `#2a2a3e` background, `#4a4a6a` border, 6px radius, z-index: 1001\n- Position: offset 12px right, 8px below cursor, clamped to viewport\n- Set `pointer-events: none` to avoid capturing mouse\n\n**Tests: `test/unit/ui/tooltip.test.js`**\n- Creates DOM element with correct styles\n- `update()` sets content and position\n- `show()/hide()` toggles visibility\n- Position clamping at viewport edges\n\n## Success Criteria\n- [ ] Unit tests pass: `just test test/unit/ui/tooltip.test.js`\n- [ ] Build succeeds\n- [ ] Tooltip renders with correct styling (visual check)\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:09:24.559706795-03:00","created_by":"charly vibes","updated_at":"2026-02-06T11:20:01.403078839-03:00","closed_at":"2026-02-06T11:20:01.403078839-03:00","close_reason":"All tests pass (368 unit/integration, 17 e2e). Components implemented and integrated in main.js.","dependencies":[{"issue_id":"nayra-le9.2","depends_on_id":"nayra-le9","type":"parent-child","created_at":"2026-02-05T17:09:24.561075459-03:00","created_by":"charly vibes"},{"issue_id":"nayra-le9.2","depends_on_id":"nayra-le9.1","type":"blocks","created_at":"2026-02-05T17:09:24.562403438-03:00","created_by":"charly vibes"}]}
{"id":"nayra-le9.3","title":"Phase 3: Detail Panel Component","description":"Create selection detail panel following help.js modal pattern.\n\n## Changes Required\n\n**File: `src/ui/event-panel.js` (NEW)**\n- Create `createEventPanel(container, { onClose })` factory\n- Return `{ show(), hide(), update(events), isVisible(), destroy() }`\n- Overlay with modal panel (centered, max-width 500px, z-index: 1000)\n- Display: title, time, description, category, tags, url, source\n- Handle single event display (multi-event summary deferred)\n- Escape key listener to close (call `onClose` callback)\n- Accessibility: `role=\"dialog\"`, `aria-modal=\"true\"`, `aria-label`\n- Note: `hide()` only hides; `onClose` called only for user-initiated close (Escape/backdrop)\n\n**Tests: `test/unit/ui/event-panel.test.js`**\n- Creates overlay and panel elements\n- `update(events)` renders event content\n- `show()/hide()` toggles display\n- Escape key triggers hide + onClose callback\n- Accessibility attributes present\n\n## Success Criteria\n- [ ] Unit tests pass: `just test test/unit/ui/event-panel.test.js`\n- [ ] Build succeeds\n- [ ] Panel renders centered with correct styling\n- [ ] All event fields display correctly\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:09:33.503187149-03:00","created_by":"charly vibes","updated_at":"2026-02-06T11:20:01.41461891-03:00","closed_at":"2026-02-06T11:20:01.41461891-03:00","close_reason":"All tests pass (368 unit/integration, 17 e2e). Components implemented and integrated in main.js.","dependencies":[{"issue_id":"nayra-le9.3","depends_on_id":"nayra-le9","type":"parent-child","created_at":"2026-02-05T17:09:33.504060963-03:00","created_by":"charly vibes"},{"issue_id":"nayra-le9.3","depends_on_id":"nayra-le9.1","type":"blocks","created_at":"2026-02-05T17:09:33.505201619-03:00","created_by":"charly vibes"}]}
{"id":"nayra-le9.4","title":"Phase 4: Integration","description":"Wire tooltip and panel into main.js with state subscriptions.\n\n## Changes Required\n\n**File: `src/main.js`**\n- Import `createTooltip` and `createEventPanel`\n- Create tooltip and panel instances\n- Track mouse position for tooltip positioning\n- Subscribe to store for `hoveredEventId` changes (500ms delay)\n- Subscribe to store for `selectedEventIds` changes\n- **Cancel pending tooltip timer on hover change** (important!)\n\n**File: `src/interaction/input.js`**\n- Add callback `onMousePosition(x, y)` to track cursor for tooltip\n- Provide mouse position on mousemove (only when not dragging)\n\n**Tests: `test/e2e/event-info.spec.js`**\n- Hover event 500ms → tooltip appears\n- Move away → tooltip hides immediately\n- Click event → panel opens with details\n- Press Escape → panel closes, event selected\n\n## Success Criteria\n- [ ] E2E tests pass: `just test test/e2e/event-info.spec.js`\n- [ ] All tests pass: `just test`\n- [ ] Build succeeds: `just build`\n- [ ] Hover Big Bang → tooltip shows \"Big Bang\" + time\n- [ ] Click event → panel shows full details\n- [ ] Escape closes panel\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:09:43.730259466-03:00","created_by":"charly vibes","updated_at":"2026-02-06T11:20:01.418020098-03:00","closed_at":"2026-02-06T11:20:01.418020098-03:00","close_reason":"All tests pass (368 unit/integration, 17 e2e). Components implemented and integrated in main.js.","dependencies":[{"issue_id":"nayra-le9.4","depends_on_id":"nayra-le9","type":"parent-child","created_at":"2026-02-05T17:09:43.73168575-03:00","created_by":"charly vibes"},{"issue_id":"nayra-le9.4","depends_on_id":"nayra-le9.2","type":"blocks","created_at":"2026-02-05T17:09:43.73327524-03:00","created_by":"charly vibes"},{"issue_id":"nayra-le9.4","depends_on_id":"nayra-le9.3","type":"blocks","created_at":"2026-02-05T17:09:43.734433669-03:00","created_by":"charly vibes"}]}
{"id":"nayra-lv9","title":"Add tests for jsonld-transformer.js","description":"The new jsonld-transformer.js has no test coverage. Need tests for:\n- Happy path: single event, @graph array, top-level array\n- Edge cases: missing fields, @value objects, type variations (Event, schema:Event, full URL)\n- Error cases: completely invalid input, null/undefined handling\nThis is critical as it handles external data formats.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:20.421948565-03:00","created_by":"charly vibes","updated_at":"2026-01-22T19:57:51.123534833-03:00","closed_at":"2026-01-22T19:57:51.123534833-03:00","close_reason":"Added 13 comprehensive tests for jsonld-transformer.js"}
{"id":"nayra-nfo","title":"Swipe-to-Pan with Momentum","description":"Implement swipe-to-pan with momentum scrolling:\n- Track pointer velocity (sample last 3-5 positions within 100ms window)\n- Calculate velocity on pointerup from recent samples\n- Implement momentum loop using requestAnimationFrame (rAF)\n- Apply friction decay (start with 0.95 per frame) until velocity \u003c threshold\n- Check prefers-reduced-motion: if enabled, skip momentum (stop immediately on release)\n- Write unit tests for momentum calculations\n\nSuccess criteria: Natural feel (0.92-0.98 decay range).\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:42.312481737-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:05:12.775714378-03:00","closed_at":"2026-02-20T17:05:12.775714378-03:00","close_reason":"Features already implemented with passing tests","dependencies":[{"issue_id":"nayra-nfo","depends_on_id":"nayra-0je","type":"blocks","created_at":"2026-02-06T12:10:16.570365631-03:00","created_by":"charly vibes"}]}
{"id":"nayra-nhc","title":"Implement Web Worker layout offloading","description":"Offload heavy layout computation to Web Workers for datasets with 10,000+ events.\n\n**Requirements:**\n- Web Worker performs layout calculation off main thread\n- Structured message protocol for requests and results\n- Layout request includes events (id, start, end as strings), viewport bounds, zoom level\n- Layout result includes positioned events (id, lane, screenX, width), lane count, computation duration\n- Support layout cancellation when new request arrives\n- Use transferable objects for performance\n\n**Acceptance Criteria:**\n- Layout for 10,000+ events runs in Web Worker\n- Main thread remains responsive during computation\n- Results posted back and integrated smoothly\n- Stale results discarded appropriately\n- Computation completes within 100ms for 10,000 events\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirements: Web Worker Offloading, Web Worker Message Protocol)\n**Depends On:** Lane assignment algorithm, lane positioning\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:30.068024772-03:00","created_by":"charly vibes","updated_at":"2026-02-20T16:15:24.658869188-03:00","closed_at":"2026-02-20T16:15:24.658869188-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-nhc","depends_on_id":"nayra-4kv","type":"blocks","created_at":"2026-02-20T10:55:47.932480476-03:00","created_by":"charly vibes"},{"issue_id":"nayra-nhc","depends_on_id":"nayra-vyw","type":"blocks","created_at":"2026-02-20T10:55:47.969201648-03:00","created_by":"charly vibes"}]}
{"id":"nayra-o0p","title":"Add tests for new time-parser formats (BCE, CE, natural language, ISO datetime)","description":"New time-parser formats added in data-schema commit lack test coverage:\n- BCE/BC notation (44 BCE, 44 BC)\n- CE/AD notation (1066 CE, 1066 AD)\n- Natural language (X billion/million years ago)\n- ISO 8601 datetime with timezone\n- Year zero rejection error handling","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:20.779725736-03:00","created_by":"charly vibes","updated_at":"2026-01-22T19:57:51.013180081-03:00","closed_at":"2026-01-22T19:57:51.013180081-03:00","close_reason":"Added 13 tests for BCE/CE, ISO datetime, natural language formats"}
{"id":"nayra-pnu","title":"Phase 2: Visual Feedback in Renderer","description":"Add visual feedback for hover and selected states.\n\n1. Create src/rendering/colors.js with lightenColor(hexColor, amount) utility\n2. Modify src/rendering/renderer.js drawEvent() to:\n   - Hover state: lighter fill (20% toward white)\n   - Selected state: 2px yellow border (#ffcc00)\n\nTests needed:\n- test/unit/colors.test.js: lightenColor works with 6-char and 3-char hex, clamps at white\n- test/unit/renderer.test.js: hovered event has different visual, selected event has border, multiple selected events show selected state\n\nSuccess: just test passes with updated renderer tests.\n\nRef: plans/2026-01-23-event-selection.md#phase-2-visual-feedback-in-renderer\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:58:11.433598129-03:00","created_by":"charly vibes","updated_at":"2026-01-23T22:09:29.31768093-03:00","closed_at":"2026-01-23T22:09:29.31768093-03:00","close_reason":"Added lightenColor, getEventFillColor, getEventStrokeStyle with 17 new tests"}
{"id":"nayra-pzi","title":"Foundation: Touch input infrastructure","description":"Set up foundational infrastructure for touch input:\n- Add touch-action: none CSS to canvas element in src/main.js\n- Create src/interaction/gestures.js with GestureRecognizer class skeleton\n- Add pointer tracking (Map of pointerId → { x, y, timestamp, initialX, initialY })\n- Add maximum pointer limit (ignore pointers beyond first 2 for gestures)\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:15.692307047-03:00","created_by":"charly vibes","updated_at":"2026-02-06T12:13:23.308644678-03:00","closed_at":"2026-02-06T12:13:23.308644678-03:00","close_reason":"Implemented GestureRecognizer class with pointer tracking and touch-action CSS"}
{"id":"nayra-q7p","title":"Add event layout test coverage","description":"Add comprehensive test coverage for event layout algorithms.\n\n**Test Scenarios:**\n- Non-overlapping events in single lane\n- Overlapping events in multiple lanes  \n- Greedy interval coloring with various patterns\n- Efficient layout computation (10,000 events \u003c 100ms)\n- Simultaneous event handling with tie-breakers\n- Spatial hash construction and queries\n- Label collision detection\n- LOD level transitions\n- Cluster creation and expansion\n- Web Worker message protocol\n\n**Acceptance Criteria:**\n- All scenarios from spec have corresponding tests\n- Performance benchmarks validate O(N log N) complexity\n- Edge cases covered (empty dataset, single event, all overlapping)\n- Integration tests verify end-to-end layout\n- Tests pass consistently\n\n**Related Spec:** openspec/specs/event-layout/spec.md (all test scenarios)\n**Depends On:** All layout implementation tasks\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:39.055932069-03:00","created_by":"charly vibes","updated_at":"2026-02-20T16:49:44.660217878-03:00","closed_at":"2026-02-20T16:49:44.660217878-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-q7p","depends_on_id":"nayra-4kv","type":"blocks","created_at":"2026-02-20T10:55:48.262695478-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-vyw","type":"blocks","created_at":"2026-02-20T10:55:48.301246565-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-9wc","type":"blocks","created_at":"2026-02-20T10:55:48.340323391-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-zxs","type":"blocks","created_at":"2026-02-20T10:55:48.377412746-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-erc","type":"blocks","created_at":"2026-02-20T10:55:48.41539416-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-e8q","type":"blocks","created_at":"2026-02-20T10:55:48.4499305-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-nhc","type":"blocks","created_at":"2026-02-20T10:55:48.487186349-03:00","created_by":"charly vibes"},{"issue_id":"nayra-q7p","depends_on_id":"nayra-fhm","type":"blocks","created_at":"2026-02-20T10:55:48.525844507-03:00","created_by":"charly vibes"}]}
{"id":"nayra-qvm","title":"Update time-parser to handle all data-schema formats","description":"Update the time-parser to handle all date/time formats defined in the data-schema spec.\n\n**Location:** `src/time/time-parser.js` (verify actual path)\n\n**Formats to support (from spec lines 61-79):**\n- ISO 8601: 2024-03-15T10:30:00Z, 2024-03-15\n- Year only: 1969\n- Negative year: -44 (meaning 44 BCE, historical convention)\n- BCE/BC notation: 44 BCE, 44 BC (case insensitive)\n- CE/AD notation: 1066 CE, 1066 AD\n- Month-Year: March 1969, 1969-03\n- Geological Ma: 65 Ma, 65 MYA (million years ago)\n- Geological Ga: 4.5 Ga, 4.5 BYA (billion years ago)\n- Relative: 13.8 billion years ago\n\n**Special handling:**\n- Year zero (0, -0) must be rejected with helpful error (spec lines 103-108)\n- Use historical year numbering (no year zero), not astronomical\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-time-formats\n\n**Verification:**\n1. parseTime('2024-03-15') returns valid timestamp\n2. parseTime('44 BCE') returns negative timestamp for 44 BCE\n3. parseTime('65 Ma') returns ~65 million years ago\n4. parseTime('0') throws error mentioning year zero\n5. Run: `just test` passes time-parser tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:25.932350722-03:00","created_by":"charly vibes","updated_at":"2026-01-22T00:52:13.944027913-03:00","closed_at":"2026-01-22T00:52:13.944027913-03:00","close_reason":"Closed"}
{"id":"nayra-r1i","title":"Performance Testing \u0026 Monitoring","description":"Build automated performance testing infrastructure and monitoring tools. Ensure 60 FPS rendering, catch performance regressions, and provide developer profiling tools.","status":"open","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:13.07805514-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:51:32.584450405-03:00"}
{"id":"nayra-r1i.1","title":"Create automated performance benchmark suite","description":"Create automated performance benchmark suite for initial render, pan, zoom, and layout operations across different dataset sizes (1K/10K/50K events).\n\nFiles:\n- test/performance/benchmark.test.ts (main benchmark suite)\n- test/performance/fixtures/ (test datasets)\n- test/performance/helpers/ (benchmark utilities)\n\nTDD Requirement:\nWrite benchmark tests first to establish baseline metrics before any optimizations.\n\nSuccess Criteria:\n- Benchmarks complete in \u003c5min on CI\n- Results written to test-results/performance-{timestamp}.json\n- Baseline metrics established for comparison\n- All benchmarks pass with variance \u003c5%\n\nSpec: openspec/specs/performance/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:17.204049411-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:04.47052867-03:00","dependencies":[{"issue_id":"nayra-r1i.1","depends_on_id":"nayra-r1i","type":"parent-child","created_at":"2026-02-20T17:17:17.204924829-03:00","created_by":"charly vibes"}]}
{"id":"nayra-r1i.2","title":"Add frame time measurement and logging","description":"Implement frame time measurement and logging using Performance API to identify frames exceeding 60fps threshold (\u003e16.67ms).\n\nFiles:\n- src/monitoring/frame-time.ts (Performance API integration)\n- src/monitoring/performance-logger.ts (logging implementation)\n- test/monitoring/frame-time.test.ts (TDD tests)\n\nTDD Requirement:\nWrite tests for frame time tracking before implementation, mock Performance API.\n\nSuccess Criteria:\n- Frames \u003e16.67ms logged to console in dev mode\n- Performance.mark() and Performance.measure() used correctly\n- Metrics include: frame time, render time, layout time\n- \u003c0.1ms overhead from monitoring itself\n- Integration tests verify logging triggers\n\nSpec: openspec/specs/performance/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:18.320311452-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:11.016614354-03:00","dependencies":[{"issue_id":"nayra-r1i.2","depends_on_id":"nayra-r1i","type":"parent-child","created_at":"2026-02-20T17:17:18.321117249-03:00","created_by":"charly vibes"}]}
{"id":"nayra-r1i.3","title":"Implement performance regression tests in CI","description":"Implement automated performance regression tests in CI that fail builds when performance degrades \u003e10% from baseline.\n\nFiles:\n- .github/workflows/performance.yml (CI workflow)\n- test/performance/regression.test.ts (regression test suite)\n- scripts/compare-benchmarks.ts (comparison tool)\n- .performance-baseline.json (baseline metrics)\n\nTDD Requirement:\nWrite regression detection tests first, verify they catch intentional slowdowns.\n\nSuccess Criteria:\n- CI runs performance tests on every PR\n- Comparison against baseline stored in repo\n- Build fails if any metric degrades \u003e10%\n- PR comments show performance impact (+/- %)\n- Caching prevents redundant benchmark runs\n\nSpec: openspec/specs/performance/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:19.151355828-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:15.595335656-03:00","dependencies":[{"issue_id":"nayra-r1i.3","depends_on_id":"nayra-r1i","type":"parent-child","created_at":"2026-02-20T17:17:19.152401306-03:00","created_by":"charly vibes"},{"issue_id":"nayra-r1i.3","depends_on_id":"nayra-r1i.1","type":"blocks","created_at":"2026-02-20T17:58:39.593205341-03:00","created_by":"charly vibes"}]}
{"id":"nayra-r1i.4","title":"Add memory leak detection","description":"Add automated memory leak detection to identify leaked event listeners, DOM nodes, and retained objects during timeline operations.\n\nFiles:\n- test/performance/memory-leaks.test.ts (leak detection tests)\n- src/monitoring/memory-profiler.ts (profiling implementation)\n- scripts/memory-snapshot.ts (heap snapshot tool)\n\nTDD Requirement:\nWrite tests that create/destroy timelines repeatedly, verify memory returns to baseline.\n\nSuccess Criteria:\n- Tests create/destroy timeline 100x, memory growth \u003c5MB\n- Detect leaked event listeners (check EventTarget registry)\n- Detect leaked DOM nodes (disconnected but retained)\n- Integration with Chrome DevTools Protocol (CDP) for CI\n- Tests pass with --expose-gc flag\n\nSpec: openspec/specs/performance/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:19.989066101-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:23.907929758-03:00","dependencies":[{"issue_id":"nayra-r1i.4","depends_on_id":"nayra-r1i","type":"parent-child","created_at":"2026-02-20T17:17:19.989954072-03:00","created_by":"charly vibes"}]}
{"id":"nayra-r1i.5","title":"Create performance monitoring UI","description":"Create developer performance monitoring overlay UI showing real-time FPS, frame time, and memory usage.\n\nFiles:\n- src/components/dev/PerformanceOverlay.tsx (React component)\n- src/monitoring/stats-collector.ts (metrics collection)\n- src/styles/performance-overlay.css (styling)\n- test/components/dev/PerformanceOverlay.test.tsx (component tests)\n\nTDD Requirement:\nWrite component tests first, verify correct display of mock performance data.\n\nSuccess Criteria:\n- Toggle with Ctrl+Shift+P keyboard shortcut\n- Shows: current FPS, avg frame time (ms), heap size (MB)\n- Updates every 100ms without causing jank\n- \u003c50 LOC component, \u003c1% CPU overhead\n- Hidden in production builds (tree-shaken)\n- Color-coded warnings (yellow \u003e16.67ms, red \u003e33ms)\n\nSpec: openspec/specs/performance/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:20.652558474-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:30.976101403-03:00","dependencies":[{"issue_id":"nayra-r1i.5","depends_on_id":"nayra-r1i","type":"parent-child","created_at":"2026-02-20T17:17:20.653644007-03:00","created_by":"charly vibes"},{"issue_id":"nayra-r1i.5","depends_on_id":"nayra-r1i.2","type":"blocks","created_at":"2026-02-20T17:58:40.481657388-03:00","created_by":"charly vibes"}]}
{"id":"nayra-r1i.6","title":"Verify power efficiency","description":"Verify power efficiency by measuring CPU usage when timeline is idle and confirming background tab throttling works correctly.\n\nFiles:\n- test/performance/power-efficiency.test.ts (efficiency tests)\n- src/core/idle-detection.ts (idle state management)\n- test/performance/background-throttle.test.ts (throttling tests)\n\nTDD Requirement:\nWrite tests that verify CPU usage drops when no interactions occur for 5 seconds.\n\nSuccess Criteria:\n- CPU usage \u003c1% when timeline idle for \u003e5s\n- requestAnimationFrame stops when document.hidden === true\n- Background tabs use Page Visibility API throttling\n- ResizeObserver/IntersectionObserver disconnected when idle\n- Tests use Puppeteer CDP to measure actual CPU usage\n- Battery life impact documented in spec\n\nSpec: openspec/specs/performance/spec.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:21.065274736-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:55:34.83897515-03:00","dependencies":[{"issue_id":"nayra-r1i.6","depends_on_id":"nayra-r1i","type":"parent-child","created_at":"2026-02-20T17:17:21.066051228-03:00","created_by":"charly vibes"}]}
{"id":"nayra-r1o","title":"Pinch-to-Zoom gesture","description":"Implement pinch-to-zoom in GestureRecognizer:\n- Detect two active pointers\n- Calculate initial distance and midpoint on second pointer down\n- Track distance delta during pointermove to compute zoom factor\n- Dispatch zoom action to store with midpoint anchor\n- Handle 3+ pointer scenario: ignore additional pointers, continue with original two\n- Handle pointer removal during pinch: transition to single-pointer pan\n- Write unit tests for pinch gesture recognition\n\nSuccess criteria: 60 FPS with 10,000 events, midpoint accuracy ±2px.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:29.862364176-03:00","created_by":"charly vibes","updated_at":"2026-02-19T21:45:03.131782308-03:00","closed_at":"2026-02-19T21:45:03.131782308-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-r1o","depends_on_id":"nayra-0je","type":"blocks","created_at":"2026-02-06T12:10:16.500389413-03:00","created_by":"charly vibes"}]}
{"id":"nayra-s1p","title":"Touch-Accessible Help Button","description":"Epic: Add a floating '?' button to toggle the help menu on touch devices. Currently the help menu requires the '?' keyboard shortcut, which is unavailable on touchscreens. See openspec/changes/add-touch-help-button/proposal.md for full proposal.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-08T17:27:21.620529917-03:00","created_by":"charly vibes","updated_at":"2026-02-08T17:37:00.527432558-03:00","closed_at":"2026-02-08T17:37:00.527432558-03:00","close_reason":"All subtasks complete: tests, component, wiring"}
{"id":"nayra-s6j","title":"Long-Press Context Menu","description":"Implement long-press detection for context menu:\n- Start 500ms timer on single pointerdown\n- Cancel timer if pointer moves \u003e10px or pointerup occurs before threshold\n- On timer completion, trigger context menu callback\n- Handle long-press on empty area: trigger timeline-level context menu or no-op\n- Integrate with existing context menu system (or provide stub callback for testing)\n- Write unit tests for long-press detection and cancellation\n\nSuccess criteria: 500ms ±50ms threshold, \u003e10px cancel distance.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-06T12:09:48.168387046-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:05:12.786337692-03:00","closed_at":"2026-02-20T17:05:12.786337692-03:00","close_reason":"Features already implemented with passing tests","dependencies":[{"issue_id":"nayra-s6j","depends_on_id":"nayra-0je","type":"blocks","created_at":"2026-02-06T12:10:16.605156904-03:00","created_by":"charly vibes"}]}
{"id":"nayra-s7i","title":"Create example data files for different timescales","description":"Create example data files demonstrating different timescales and data sources.\n\n**Location:** `examples/`\n\n**Files to create (from spec lines 319-343):**\n\n1. **space-exploration.json** (Recent history)\n   - Events from 1957-present\n   - Mix of point events (launches) and span events (missions)\n   - Use ISO dates\n\n2. **ancient-civilizations.json** (Ancient history)\n   - Events using BCE notation\n   - Year-only precision for approximate dates\n   - Include Egyptian, Greek, Roman events\n\n3. **earth-history.json** (Deep time)\n   - Geological events using Ma/Ga notation\n   - From Big Bang (13.8 Ga) to present\n   - Include mass extinctions, era boundaries\n\n4. **wikidata-wars.json** (Wikidata format)\n   - Demonstrate Wikidata property mapping\n   - Include source fields with Q-numbers\n   - Show transformed output format\n\n**Each file should:**\n- Be valid against event.schema.json\n- Include 5-10 events\n- Demonstrate relevant time formats\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-example-data-files\n\n**Verification:**\n1. All 4 files exist in examples/\n2. Each validates: `npx ajv validate -s src/data/event.schema.json -d examples/*.json`\n3. Files load correctly in the application","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:22.57165324-03:00","created_by":"charly vibes","updated_at":"2026-01-23T18:13:56.990740292-03:00","closed_at":"2026-01-23T18:13:56.990740292-03:00","close_reason":"Created 4 example data files: space-exploration.json (8 events), ancient-civilizations.json (8 events), earth-history.json (10 events), wikidata-wars.json (7 events). All validate successfully.","dependencies":[{"issue_id":"nayra-s7i","depends_on_id":"nayra-h19","type":"blocks","created_at":"2026-01-22T00:24:55.755157045-03:00","created_by":"charly vibes"},{"issue_id":"nayra-s7i","depends_on_id":"nayra-qvm","type":"blocks","created_at":"2026-01-22T00:30:08.963436907-03:00","created_by":"charly vibes"}]}
{"id":"nayra-sm0","title":"Add touch gesture integration coverage and documentation","description":"Complete remaining validation for touch input change:\n\n**Testing:**\n- Add integration tests for pointer gestures\n- Perform manual device/DevTools checks  \n- Verify 60 FPS pan/zoom performance\n- Confirm mouse/pen behavior on hybrid devices\n- Verify Safari iOS gesture conflicts resolved\n\n**Documentation:**\n- Document touch gestures in README\n- Update help menu with touch instructions\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-08T18:21:30.97048317-03:00","created_by":"charly vibes","updated_at":"2026-02-20T16:49:44.68107879-03:00","closed_at":"2026-02-20T16:49:44.68107879-03:00","close_reason":"Closed"}
{"id":"nayra-tnj","title":"Accessibility Infrastructure (WCAG 2.1 AA)","description":"Build comprehensive accessibility infrastructure for screen reader support and WCAG 2.1 Level AA compliance. Includes parallel DOM structure, ARIA live regions, and comprehensive labeling.","status":"open","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:02.907986549-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:51:30.816770879-03:00"}
{"id":"nayra-tnj.1","title":"Create parallel accessible DOM structure","description":"Create a parallel accessible DOM structure synchronized with canvas rendering.\n\n**Files to modify:**\n- src/accessibility/dom-sync.js (create)\n- src/rendering/timeline.js (integrate DOM sync)\n- src/main.js (initialize accessibility)\n\n**WCAG 2.1 AA Requirements:**\n- 1.3.1 Info and Relationships (Level A)\n- 4.1.2 Name, Role, Value (Level A)\n\n**Success Criteria:**\n- Hidden DOM tree with semantic ul/li structure for timeline events\n- Real-time synchronization when viewport changes or events update\n- Each event has proper semantic HTML with appropriate roles\n- DOM structure mirrors visual canvas hierarchy\n- Screen reader can navigate event list with arrow keys\n\n**Screen Reader Testing:**\n- NVDA/JAWS: Navigate with arrow keys, verify event announcements\n- Test list navigation (up/down arrows through events)\n- Verify semantic structure is announced correctly\n\n**TDD Requirement:**\n- Write tests first in src/accessibility/dom-sync.test.js\n- Test DOM creation, synchronization, and event ordering\n- Mock canvas state and verify DOM updates\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (Parallel DOM Structure)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:08.352931114-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:52:36.529083335-03:00","dependencies":[{"issue_id":"nayra-tnj.1","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:08.353888967-03:00","created_by":"charly vibes"}]}
{"id":"nayra-tnj.2","title":"Implement ARIA live regions","description":"Implement ARIA live regions for dynamic content announcements.\n\n**Files to modify:**\n- src/accessibility/live-announcer.js (create)\n- src/interaction/viewport.js (announce viewport changes)\n- src/interaction/selection.js (announce selections)\n- src/ui/searchbar.js (announce search results)\n\n**WCAG 2.1 AA Requirements:**\n- 4.1.3 Status Messages (Level AA)\n- 1.3.1 Info and Relationships (Level A)\n\n**Success Criteria:**\n- aria-live=\"polite\" for viewport navigation announcements\n- aria-live=\"assertive\" for critical user actions\n- Announce: \"Showing [N] events from [date] to [date]\" on viewport change\n- Announce: \"Selected [event title] at [time]\" on event selection\n- Announce: \"Found [N] results for [query]\" on search completion\n- Debounce rapid updates to prevent announcement spam\n\n**Screen Reader Testing:**\n- NVDA/JAWS: Pan timeline, verify viewport range announced\n- Select events, verify selection announced\n- Search for events, verify result count announced\n- Verify announcements don't interrupt user navigation\n\n**TDD Requirement:**\n- Write tests first in src/accessibility/live-announcer.test.js\n- Test announcement queuing, debouncing, and priority\n- Mock DOM and verify aria-live attribute usage\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (ARIA Live Regions)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:09.061780574-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:52:45.116252152-03:00","dependencies":[{"issue_id":"nayra-tnj.2","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:09.063286659-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.2","depends_on_id":"nayra-tnj.1","type":"blocks","created_at":"2026-02-20T17:58:27.736679277-03:00","created_by":"charly vibes"}]}
{"id":"nayra-tnj.3","title":"Add comprehensive ARIA labels and descriptions","description":"Add comprehensive ARIA labels and descriptions to all interactive elements.\n\n**Files to modify:**\n- src/accessibility/aria-labels.js (create)\n- src/ui/event-panel.js (add labels to event details)\n- src/ui/searchbar.js (add search input labels)\n- src/ui/help.js (add help modal labels)\n- src/rendering/timeline.js (add event labels)\n\n**WCAG 2.1 AA Requirements:**\n- 4.1.2 Name, Role, Value (Level A)\n- 2.4.6 Headings and Labels (Level AA)\n- 1.1.1 Non-text Content (Level A)\n\n**Success Criteria:**\n- aria-label on each event: \"[title] on [formatted date and time]\"\n- aria-description with event details: \"[description/notes]\"\n- Search input: aria-label=\"Search timeline events\"\n- Navigation controls: aria-label=\"Pan left/right\", \"Zoom in/out\"\n- Event clusters: aria-label=\"[N] events in [date range]\"\n- All buttons and controls have descriptive labels\n\n**Screen Reader Testing:**\n- NVDA/JAWS: Tab through all controls, verify labels read correctly\n- Navigate event list, verify title and time announced\n- Focus on event, verify description available\n- Test with ARIA inspection tools (aXe, WAVE)\n\n**TDD Requirement:**\n- Write tests first in src/accessibility/aria-labels.test.js\n- Test label generation for various event types\n- Verify all interactive elements have accessible names\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (ARIA Labels and Descriptions)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:09.824982032-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:52:54.157584493-03:00","dependencies":[{"issue_id":"nayra-tnj.3","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:09.827566837-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.3","depends_on_id":"nayra-tnj.1","type":"blocks","created_at":"2026-02-20T17:58:28.923631244-03:00","created_by":"charly vibes"}]}
{"id":"nayra-tnj.4","title":"Implement skip navigation links","description":"Implement skip navigation links for keyboard accessibility.\n\n**Files to modify:**\n- src/accessibility/skip-links.js (create)\n- src/main.js (add skip links to DOM)\n- styles/accessibility.css (create - skip link styling)\n\n**WCAG 2.1 AA Requirements:**\n- 2.4.1 Bypass Blocks (Level A)\n- 2.1.1 Keyboard (Level A)\n\n**Success Criteria:**\n- \"Skip to timeline\" link as first focusable element\n- \"Skip to search\" link for quick access to search\n- \"Skip to help\" link for documentation\n- Links visually hidden by default (position: absolute, left: -10000px)\n- Visible on focus with proper styling (high contrast, clear text)\n- Smooth scroll to target element on activation\n- Focus moves to target landmark after skip\n\n**Screen Reader Testing:**\n- NVDA/JAWS: Tab on page load, verify skip link appears first\n- Activate skip link, verify focus moves to timeline\n- Test with keyboard only (no mouse)\n- Verify skip links don't break tab order\n\n**TDD Requirement:**\n- Write tests first in src/accessibility/skip-links.test.js\n- Test link visibility on focus\n- Test focus management after skip activation\n- Verify proper DOM structure and attributes\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (Skip Navigation Links)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:10.598605555-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:02.945830084-03:00","dependencies":[{"issue_id":"nayra-tnj.4","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:10.599819059-03:00","created_by":"charly vibes"}]}
{"id":"nayra-tnj.5","title":"Add modal focus trap","description":"Add modal focus trap for dialogs and overlays.\n\n**Files to modify:**\n- src/accessibility/focus-trap.js (create)\n- src/ui/event-panel.js (add focus trap to event details modal)\n- src/ui/help.js (add focus trap to help modal)\n- src/ui/searchbar.js (manage focus in search results)\n\n**WCAG 2.1 AA Requirements:**\n- 2.1.2 No Keyboard Trap (Level A) - with documented escape\n- 2.4.3 Focus Order (Level A)\n- 2.4.7 Focus Visible (Level AA)\n\n**Success Criteria:**\n- Tab key cycles through focusable elements within modal\n- Shift+Tab cycles backwards without escaping\n- First and last element form a circular focus loop\n- Escape key closes modal and returns focus to trigger element\n- Focus moves to modal's first focusable element on open\n- Background content has aria-hidden=\"true\" and inert\n- No focus escape to background elements via mouse or keyboard\n\n**Screen Reader Testing:**\n- NVDA/JAWS: Open event panel, verify focus trapped inside\n- Tab through all controls, verify circular navigation\n- Press Escape, verify focus returns to triggering element\n- Test with keyboard only navigation\n- Verify background elements not reachable\n\n**TDD Requirement:**\n- Write tests first in src/accessibility/focus-trap.test.js\n- Test focus cycling (forward and backward)\n- Test escape key handling and focus restoration\n- Mock DOM and keyboard events\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (Modal Focus Management)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:11.304452805-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:12.169000693-03:00","dependencies":[{"issue_id":"nayra-tnj.5","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:11.305456394-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.5","depends_on_id":"nayra-tnj.1","type":"blocks","created_at":"2026-02-20T17:58:29.418462055-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.5","depends_on_id":"nayra-30a.6","type":"blocks","created_at":"2026-02-20T17:59:15.105482217-03:00","created_by":"charly vibes"}]}
{"id":"nayra-tnj.6","title":"Implement color-independent information","description":"Implement color-independent information encoding for visual elements.\n\n**Files to modify:**\n- src/rendering/event-shapes.js (create)\n- src/rendering/timeline.js (integrate shape rendering)\n- src/data/categories.js (add shape/pattern definitions)\n- styles/patterns.css (create - CSS patterns for fallback)\n\n**WCAG 2.1 AA Requirements:**\n- 1.4.1 Use of Color (Level A)\n- 1.4.11 Non-text Contrast (Level AA)\n\n**Success Criteria:**\n- Each event category uses unique shape (circle, square, diamond, triangle, star)\n- Add visual patterns/textures in addition to color fills\n- Status indicators use icons + color (e.g., checkmark for completed)\n- Provide shape legend in help panel\n- Selected events use border thickness + color\n- High contrast mode support (prefers-contrast media query)\n- Pattern visibility maintained in grayscale/colorblind simulation\n\n**Screen Reader Testing:**\n- NVDA/JAWS: Verify shape/category announced in aria-label\n- Test with Windows High Contrast Mode\n- Verify pattern descriptions in event details\n\n**Color Independence Testing:**\n- Test with browser DevTools colorblind simulation\n- Convert to grayscale, verify distinction still clear\n- Test with Windows High Contrast Mode\n- Use aXe or WAVE to verify color contrast\n\n**TDD Requirement:**\n- Write tests first in src/rendering/event-shapes.test.js\n- Test shape rendering for each category\n- Verify pattern application independent of color\n- Test high contrast mode detection\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (Color Independence)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:12.008998025-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:21.759921823-03:00","dependencies":[{"issue_id":"nayra-tnj.6","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:12.010510512-03:00","created_by":"charly vibes"}]}
{"id":"nayra-tnj.7","title":"Verify WCAG 2.1 AA compliance","description":"Verify complete WCAG 2.1 AA compliance across the application.\n\n**Files to test:**\n- All files in src/accessibility/\n- All files in src/ui/\n- src/rendering/timeline.js\n- src/interaction/*.js\n\n**WCAG 2.1 AA Requirements to verify:**\n- 1.4.3 Contrast (Minimum) - 4.5:1 for text, 3:1 for UI components\n- 2.1.1 Keyboard - All functionality via keyboard\n- 2.4.7 Focus Visible - Visible focus indicators\n- 4.1.2 Name, Role, Value - All components accessible\n\n**Success Criteria:**\n- Color contrast audit passes (use aXe, WAVE, or WebAIM tools)\n- All text meets 4.5:1 contrast ratio\n- All UI components meet 3:1 contrast ratio\n- Complete keyboard navigation without mouse\n- All interactive elements reachable via Tab\n- Focus indicators clearly visible\n- Screen reader testing complete (NVDA + JAWS or VoiceOver)\n- Automated accessibility tests pass\n\n**Testing Checklist:**\n□ Run aXe DevTools accessibility scan - 0 violations\n□ Run WAVE browser extension - verify no errors\n□ WebAIM Contrast Checker on all color combinations\n□ Keyboard-only navigation test (unplug mouse)\n□ NVDA screen reader full application test\n□ JAWS or VoiceOver screen reader verification\n□ Test with Windows High Contrast Mode\n□ Test with browser zoom at 200%\n□ Test all modals, forms, and interactive elements\n□ Verify all images have alt text (if any)\n□ Check focus order is logical\n□ Verify no keyboard traps exist\n\n**TDD Requirement:**\n- Integration tests in src/accessibility/wcag-compliance.test.js\n- Automated contrast ratio checks\n- Keyboard navigation test suite\n- ARIA attribute validation tests\n\n**Spec Reference:** openspec/specs/accessibility/spec.md (WCAG 2.1 AA Compliance)","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T17:17:12.946043198-03:00","created_by":"charly vibes","updated_at":"2026-02-20T17:53:33.554411153-03:00","dependencies":[{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj","type":"parent-child","created_at":"2026-02-20T17:17:12.947088385-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj.1","type":"blocks","created_at":"2026-02-20T17:58:30.24406425-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj.2","type":"blocks","created_at":"2026-02-20T17:58:31.049796274-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj.3","type":"blocks","created_at":"2026-02-20T17:58:31.924237979-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj.4","type":"blocks","created_at":"2026-02-20T17:58:32.82827415-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj.5","type":"blocks","created_at":"2026-02-20T17:58:33.681234932-03:00","created_by":"charly vibes"},{"issue_id":"nayra-tnj.7","depends_on_id":"nayra-tnj.6","type":"blocks","created_at":"2026-02-20T17:58:34.658693373-03:00","created_by":"charly vibes"}]}
{"id":"nayra-u16","title":"Phase 3: Event Detail Panel","description":"Create selection detail panel following help.js modal pattern.\n\n## Changes Required\n\n**File: src/ui/event-panel.js (NEW)**\n- Create createEventPanel(container, { onClose }) factory\n- Return { show(), hide(), update(events), isVisible(), destroy() }\n- Overlay with modal panel (centered, max-width 500px)\n- Display: title, time, description, category, tags, url, source\n- Escape key listener to close (call onClose callback)\n- Accessibility: role=dialog, aria-modal=true, aria-label\n\n**Tests: test/integration/event-panel.test.js**\n- Creates overlay and panel elements\n- update(events) renders event content\n- show()/hide() toggles display\n- Escape key triggers hide + onClose callback\n- Accessibility attributes present\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-05T17:17:19.444000759-03:00","created_by":"charly vibes","updated_at":"2026-02-05T17:18:50.935152355-03:00","closed_at":"2026-02-05T17:18:50.935152355-03:00","close_reason":"Phase 3 complete: Event detail panel created with TDD"}
{"id":"nayra-u6f","title":"Create help-button.js component","description":"Create src/ui/help-button.js with createHelpButton(container, { onToggleHelp }) factory function.\n\n- Render a \u003cbutton type=\"button\"\u003e element, fixed position, bottom-right corner, 48x48px circular\n- Style with help menu theme (#2a2a3e bg, #00d9ff accent, #4a4a6a border)\n- z-index: 900 (below help menu overlay at 1000)\n- Use env(safe-area-inset-*) for bottom/right offsets\n- touch-action: manipulation, -webkit-tap-highlight-color: transparent\n- stopPropagation on pointerdown to prevent canvas gesture interference\n- Press feedback via scale transform on pointerdown/pointerup\n- aria-label=\"Help\"\n- destroy() removes element and cleans up all event listeners\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-08T17:27:31.204362853-03:00","created_by":"charly vibes","updated_at":"2026-02-08T17:33:56.736943938-03:00","closed_at":"2026-02-08T17:33:56.736943938-03:00","close_reason":"Component implemented, all tests green","dependencies":[{"issue_id":"nayra-u6f","depends_on_id":"nayra-ztj","type":"blocks","created_at":"2026-02-08T17:28:30.878172765-03:00","created_by":"charly vibes"},{"issue_id":"nayra-u6f","depends_on_id":"nayra-s1p","type":"parent-child","created_at":"2026-02-08T17:28:34.923985562-03:00","created_by":"charly vibes"}]}
{"id":"nayra-vyw","title":"Implement lane positioning calculation","description":"Calculate consistent vertical positions for event lanes.\n\n**Requirements:**\n- Lane 0 closest to timeline axis\n- Each subsequent lane offset vertically with consistent spacing\n- Total height accommodates all lanes\n- Support zoom-based lane height adjustment for visual density\n- Events remain readable at all zoom levels\n\n**Acceptance Criteria:**\n- Lane positions are consistent and predictable\n- Vertical spacing is configurable\n- Layout adapts to zoom level appropriately\n- Works with variable number of lanes\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirement: Lane Positioning)\n**Related Files:** src/rendering/renderer.js\n**Blocks:** Rendering integration\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:07.254559485-03:00","created_by":"charly vibes","updated_at":"2026-02-20T11:28:10.122223097-03:00","closed_at":"2026-02-20T11:28:10.122223097-03:00","close_reason":"Closed"}
{"id":"nayra-y9x","title":"Phase 8: Deep-time sample data \u0026 validation","description":"Create samples.js with 100 events: 50 recent (1900-2100), 25 geological (Ma), 25 cosmological (Ga). Add axis labels and grid. Validate 60FPS at all scales.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:01.075262423-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:49:23.319907-03:00","closed_at":"2026-01-21T20:49:23.319907-03:00","close_reason":"Implemented grid lines and adaptive axis labels","dependencies":[{"issue_id":"nayra-y9x","depends_on_id":"nayra-8cl","type":"blocks","created_at":"2026-01-20T19:49:25.048121691-03:00","created_by":"charly vibes"}]}
{"id":"nayra-yhs","title":"Multi-Lane Event Layout System","description":"Implement efficient multi-lane event layout using greedy interval coloring algorithms. This system positions overlapping events in separate lanes to ensure all events are visible and accessible. Includes spatial indexing for hit detection, level-of-detail strategies, and Web Worker offloading for large datasets.\n\n**Key Components:**\n- Greedy interval coloring for O(N log N) lane assignment\n- Spatial hash structures for efficient hit detection\n- Label collision detection and prioritization\n- Level-of-detail rendering strategies\n- Event clustering at macro zoom levels\n- Web Worker offloading for 10,000+ events\n\n**Success Criteria:**\n- Layout computation completes in O(N log N) time\n- 10,000 events layout within 100ms\n- All overlapping events visible in separate lanes\n- 60 FPS maintained during rendering\n- Smooth zoom level transitions\n\n**Related Spec:** openspec/specs/event-layout/spec.md","status":"closed","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:53:53.794242091-03:00","created_by":"charly vibes","updated_at":"2026-02-20T16:15:45.878079867-03:00","closed_at":"2026-02-20T16:15:45.878079867-03:00","close_reason":"Closed"}
{"id":"nayra-ztj","title":"Unit tests for help button","description":"Write unit tests in test/unit/help-button.test.js:\n\n- Button renders as \u003cbutton type=\"button\"\u003e with aria-label=\"Help\"\n- Click triggers onToggleHelp callback\n- Inline styles set width/height to 48px (assert style values, not layout)\n- pointerdown calls stopPropagation (prevents canvas gesture interference)\n- destroy() removes button from DOM\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-08T17:27:42.488263884-03:00","created_by":"charly vibes","updated_at":"2026-02-08T17:33:56.691019964-03:00","closed_at":"2026-02-08T17:33:56.691019964-03:00","close_reason":"Tests written and passing","dependencies":[{"issue_id":"nayra-ztj","depends_on_id":"nayra-s1p","type":"parent-child","created_at":"2026-02-08T17:28:35.048912921-03:00","created_by":"charly vibes"}]}
{"id":"nayra-zxs","title":"Implement label collision detection","description":"Detect and resolve label collisions to maintain readability.\n\n**Requirements:**\n- Check labels for spatial collisions using spatial hash\n- Prioritize labels based on event importance or zoom level\n- Hide low-priority labels when overlapping\n- Run collision check in near-linear time\n- Handle dense cluster label hiding\n\n**Acceptance Criteria:**\n- Labels in same spatial hash bucket are compared for collisions\n- High-priority labels always shown\n- Low-priority labels hidden when overlapping\n- Visual remains uncluttered in dense areas\n- Performance impact is minimal\n\n**Related Spec:** openspec/specs/event-layout/spec.md (Requirement: Label Collision Detection)\n**Depends On:** Spatial hash implementation\n**Epic:** nayra-yhs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-02-20T09:54:15.584181148-03:00","created_by":"charly vibes","updated_at":"2026-02-20T13:59:47.575659592-03:00","closed_at":"2026-02-20T13:59:47.575659592-03:00","close_reason":"Implemented label collision detection with spatial hash, priority-based selection, and comprehensive test coverage. All 532 tests pass.","dependencies":[{"issue_id":"nayra-zxs","depends_on_id":"nayra-9wc","type":"blocks","created_at":"2026-02-20T10:55:47.721173939-03:00","created_by":"charly vibes"}]}
