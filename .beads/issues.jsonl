{"id":"nayra-0e2","title":"Phase 1: Project scaffolding","description":"Create index.html, src/ directory structure, main.js entry point. Verify: just dev serves page without errors.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.280651877-03:00","created_by":"charly vibes","updated_at":"2026-01-20T19:57:53.903633143-03:00","closed_at":"2026-01-20T19:57:53.903633143-03:00","close_reason":"Project scaffolding complete"}
{"id":"nayra-0ey","title":"Event Selection and Hover States","description":"Implement event selection and hover states for the timeline. Enables users to click events to select them, see visual feedback on hover, and manage multi-selection with modifier keys. Foundational for tooltips, detail panels, and accessibility.\n\nEpic complete when:\n- All 3 phase issues closed\n- just test \u0026\u0026 just lint pass\n- Manual verification confirms hover/click/multi-select behavior\n\nRef: plans/2026-01-23-event-selection.md\n\nCRITICAL: Follow TDD and Tidy First.","status":"open","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:57:53.706611427-03:00","created_by":"charly vibes","updated_at":"2026-01-23T22:01:26.992869298-03:00"}
{"id":"nayra-0jb","title":"Phase 6: Pan interaction","description":"Create input.js with mousedown/mousemove/mouseup handlers. Convert px delta to BigInt time via pxToTime. Smooth 1:1 tracking.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.887899214-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:45:26.468968389-03:00","closed_at":"2026-01-21T20:45:26.468968389-03:00","close_reason":"Implemented in commit 8bd08ba","dependencies":[{"issue_id":"nayra-0jb","depends_on_id":"nayra-4e4","type":"blocks","created_at":"2026-01-20T19:49:24.913243916-03:00","created_by":"charly vibes"}]}
{"id":"nayra-0xq","title":"Add help menu with hotkeys and explanation","description":"Add a help menu/modal that displays available keyboard shortcuts and explains the application's features.\n\n## Acceptance Criteria\n- Help menu accessible via '?' or 'h' key\n- Lists all keyboard shortcuts with descriptions\n- Explains basic navigation (pan, zoom, etc.)\n- Can be dismissed with Escape or clicking outside\n\n## Implementation Notes\n- Reference existing shortcuts in src/interaction/input.js:10-14\n- Current shortcuts: Home/h (jump to today), / (open search)\n\n## Verification\n1. Run `just dev`\n2. Press ? key - modal appears\n3. Verify all shortcuts listed\n4. Press Escape - modal dismisses\n5. Click outside modal - modal dismisses\n\n## Approach\nFollow TDD: write tests first, then implement.","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T21:16:53.926363836-03:00","created_by":"charly vibes","updated_at":"2026-01-21T22:52:36.117139628-03:00","closed_at":"2026-01-21T22:52:36.117139628-03:00","close_reason":"Implemented help menu with ? keyboard shortcut, all tests pass (149 unit + 9 E2E)"}
{"id":"nayra-2zs","title":"Add JSON-LD/Schema.org transformer","description":"Create a transformer that converts JSON-LD events using Schema.org vocabulary to Nayra event format.\n\n**Location:** `src/data/jsonld-transformer.js`\n\n**Property mapping (from spec lines 234-242):**\n| Schema.org | Nayra |\n|------------|-------|\n| @id or schema:identifier | id |\n| schema:name | label |\n| schema:description | description |\n| schema:startDate | start |\n| schema:endDate | end |\n| schema:url | url |\n\n**Input formats:**\n- Single event with @context and @type: Event\n- Array of events in @graph\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-json-ld-and-schemaorg-support\n\n**Verification:**\n1. Transform Schema.org Event to Nayra event\n2. Handle @graph arrays with multiple events\n3. Extract @id correctly\n4. Run: `just test` passes jsonld-transformer tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:30:03.518339975-03:00","created_by":"charly vibes","updated_at":"2026-01-22T00:52:13.947211093-03:00","closed_at":"2026-01-22T00:52:13.947211093-03:00","close_reason":"Closed"}
{"id":"nayra-4e4","title":"Phase 5: Render loop with revision checking","description":"Wire up requestAnimationFrame loop in main.js. Only redraw when state.revision changes. No dispatch from render loop.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.777340529-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:07:32.050233859-03:00","closed_at":"2026-01-20T20:07:32.050233859-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-4e4","depends_on_id":"nayra-a7w","type":"blocks","created_at":"2026-01-20T19:49:24.848120348-03:00","created_by":"charly vibes"}]}
{"id":"nayra-4s6","title":"Add error reporting/logging to JSON-LD transformer","description":"transformEvent() returns null silently when required fields are missing. The caller discards these without logging. Consider:\n- Returning error structures with field name\n- Accumulating warnings for partial failures\n- Adding optional strict mode that throws","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:21.136141061-03:00","created_by":"charly vibes","updated_at":"2026-01-22T20:05:48.60744844-03:00","closed_at":"2026-01-22T20:05:48.60744844-03:00","close_reason":"Added transformJsonLdWithReport with error structures and strict mode - 7 new tests"}
{"id":"nayra-5bt","title":"Add search bar to jump to specific date/time","description":"Add a search bar overlay activated by '/' key. Should parse various date formats (years, Ma, Ga, named events) and jump the viewport to that time. Similar to Vim's command mode or browser address bar.","status":"closed","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T20:59:40.95418397-03:00","created_by":"charly vibes","updated_at":"2026-01-21T21:05:59.124649665-03:00","closed_at":"2026-01-21T21:05:59.124649665-03:00","close_reason":"Implemented: '/' opens search bar, parses dates (2000, 100 Ma, 4.5 Ga, Big Bang, now)"}
{"id":"nayra-5jt","title":"Add Wikidata SPARQL result transformer","description":"Create a transformer that converts Wikidata SPARQL query results to Nayra event format.\n\n**Location:** `src/data/wikidata-transformer.js`\n\n**Property mapping (from spec lines 175-186):**\n| Wikidata | Nayra |\n|----------|-------|\n| ?item URI | id (extract Q-number) |\n| ?itemLabel | label |\n| ?itemDescription | description |\n| P580 ?startTime | start |\n| P582 ?endTime | end |\n| P31 ?instanceOf | category |\n| ?article | url |\n\n**BCE date adjustment (spec lines 226-229):**\n- Wikidata uses astronomical convention (year 0 exists)\n- Nayra uses historical convention (no year 0)\n- Adjust: astronomical -43 → historical 44 BCE\n\n**Input:** SPARQL JSON results format\n**Output:** Array of Nayra events with source: 'wikidata:Qxxxx'\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-wikidata-compatibility\n\n**Verification:**\n1. Transform sample Wikidata result to Nayra event\n2. Q-number extracted correctly from URI\n3. BCE dates adjusted (e.g., -0043 → 44 BCE)\n4. Run: `just test` passes transformer tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:31.245528583-03:00","created_by":"charly vibes","updated_at":"2026-01-22T20:03:06.683222739-03:00","closed_at":"2026-01-22T20:03:06.683222739-03:00","close_reason":"Implemented Wikidata SPARQL transformer with BCE adjustment - 15 tests","dependencies":[{"issue_id":"nayra-5jt","depends_on_id":"nayra-qvm","type":"blocks","created_at":"2026-01-22T00:30:06.376821323-03:00","created_by":"charly vibes"}]}
{"id":"nayra-6sp","title":"Tracer Bullet: Prove core architecture","description":"Minimal end-to-end slice validating Canvas 60FPS, BigInt time, rational scale, pan/zoom. See plans/2026-01-19-tracer-bullet.md\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:48:40.019280675-03:00","created_by":"charly vibes","updated_at":"2026-01-21T21:36:35.611241345-03:00","closed_at":"2026-01-21T21:36:35.611241345-03:00","close_reason":"Tracer bullet complete: Canvas 60FPS, BigInt time, rational scale, pan/zoom all proven per git history"}
{"id":"nayra-7ow","title":"Export SUPPORTED_FORMATS from time-parser for help display","description":"SUPPORTED_FORMATS constant in time-parser.js lists all valid input formats but is not exported. Exporting it would allow the help system to display supported formats dynamically.","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:21.502779133-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:42:27.103953553-03:00","closed_at":"2026-01-23T21:42:27.103953553-03:00","close_reason":"Added export keyword to SUPPORTED_FORMATS constant"}
{"id":"nayra-7wn","title":"Create JSON Schema file for event validation","description":"Create a JSON Schema file for validating event data according to the data-schema spec.\n\n**Location:** `src/data/event.schema.json`\n\n**Schema Requirements (from spec lines 6-29):**\n- Required fields: id (string), start (string), label (string)\n- Optional fields: end, description, category, tags, priority, precision, url, source, metadata\n- priority: number 0-4\n- precision: enum [\"day\", \"month\", \"year\", \"decade\", \"century\"]\n- tags: array of strings\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-event-structure\n\n**Verification:**\n1. Schema file exists at src/data/event.schema.json\n2. Schema validates minimal event: {id, start, label}\n3. Schema rejects event missing required fields\n4. Run: `npx ajv validate -s src/data/event.schema.json -d test-event.json`","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:16.09015561-03:00","created_by":"charly vibes","updated_at":"2026-01-22T00:52:13.939003212-03:00","closed_at":"2026-01-22T00:52:13.939003212-03:00","close_reason":"Closed"}
{"id":"nayra-8cl","title":"Phase 7: Zoom interaction","description":"Add wheel event handler with anchor-point zoom. Calculate world time under cursor, apply zoom, compensate viewport. Clamp to bounds.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.998153652-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:45:26.4894886-03:00","closed_at":"2026-01-21T20:45:26.4894886-03:00","close_reason":"Implemented in commit 8bd08ba","dependencies":[{"issue_id":"nayra-8cl","depends_on_id":"nayra-0jb","type":"blocks","created_at":"2026-01-20T19:49:24.979212946-03:00","created_by":"charly vibes"}]}
{"id":"nayra-8ns","title":"Phase 3: Input Handling for Selection","description":"Wire up input.js for selection and hover.\n\nChanges to src/interaction/input.js:\n- Track mouse position on mousemove (not just when dragging)\n- On non-drag click: call findEventAtPoint(), dispatch SELECT_EVENT or CLEAR_SELECTION\n- On Ctrl/Cmd+click: dispatch TOGGLE_EVENT_SELECTION\n- On mousemove (not dragging): dispatch SET_HOVER with found event or null\n- Distinguish click from drag: 3px threshold\n- Update cursor: pointer when hovering over event, grab otherwise\n- On mouseleave: clear hover state and reset cursor\n\nTests in test/unit/input.test.js:\n- Click on event dispatches SELECT_EVENT\n- Ctrl+click dispatches TOGGLE_EVENT_SELECTION\n- Click on background dispatches CLEAR_SELECTION\n- Mouse move over event dispatches SET_HOVER\n- Mouse move off event dispatches SET_HOVER with null\n- Mouse leave canvas dispatches SET_HOVER with null\n- Drag does not trigger selection (distance threshold)\n\nManual verification:\n- Hover → cursor changes to pointer, event lightens\n- Click event → yellow border (selected)\n- Click another → first deselected, second selected\n- Ctrl+click → both selected\n- Click background → all deselected\n- Drag to pan → no accidental selection\n\nSuccess: just test \u0026\u0026 just lint pass.\n\nRef: plans/2026-01-23-event-selection.md#phase-3-input-handling-for-selection\n\nCRITICAL: Follow TDD and Tidy First.","status":"open","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:58:28.103364876-03:00","created_by":"charly vibes","updated_at":"2026-01-23T22:01:20.3689672-03:00","dependencies":[{"issue_id":"nayra-8ns","depends_on_id":"nayra-9gz","type":"blocks","created_at":"2026-01-23T21:58:43.174604742-03:00","created_by":"charly vibes"},{"issue_id":"nayra-8ns","depends_on_id":"nayra-pnu","type":"blocks","created_at":"2026-01-23T21:58:43.247154203-03:00","created_by":"charly vibes"}]}
{"id":"nayra-96o","title":"Phase 2: BigInt time coordinates \u0026 rational scale","description":"Create time.js (constants, project, isVisible) and scale.js (rational numer/denom, pxToTime, timeToPx). Must handle 4.5Ga without precision loss.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.415836033-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:01:00.883673764-03:00","closed_at":"2026-01-20T20:01:00.883673764-03:00","close_reason":"BigInt time coordinates and rational scale implemented with 39 passing tests","dependencies":[{"issue_id":"nayra-96o","depends_on_id":"nayra-0e2","type":"blocks","created_at":"2026-01-20T19:49:24.644317758-03:00","created_by":"charly vibes"}]}
{"id":"nayra-9gz","title":"Phase 1: Hit Detection Module","description":"Create src/interaction/hit-detection.js with findEventAtPoint(x, y, events, viewportStart, scale, canvasHeight) function.\n\nUses linear scan over visible events, returns topmost event if overlapping (last in draw order). Uses projectToScreen from core/time.js.\n\nTests needed in test/unit/hit-detection.test.js:\n- No events → returns null\n- Click on event → returns that event\n- Click on gap → returns null\n- Overlapping events → returns topmost\n- Point events (4px width) → hit detection works\n- Span events → hit detection uses full width\n\nSuccess: just test passes with new hit-detection tests.\n\nRef: plans/2026-01-23-event-selection.md#phase-1-hit-detection-module\n\nCRITICAL: Follow TDD and Tidy First.","status":"open","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:58:03.407280898-03:00","created_by":"charly vibes","updated_at":"2026-01-23T22:00:26.692093661-03:00"}
{"id":"nayra-9y7","title":"Add date format validation to event.schema.json","description":"event.schema.json accepts any string for start/end fields. Consider adding pattern validation to catch invalid date strings at schema validation time rather than runtime. Also consider expanding the precision enum to include geological scales (million_years, billion_years) to match time-parser capabilities.","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:21.85343125-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:45:21.962375755-03:00","closed_at":"2026-01-23T21:45:21.962375755-03:00","close_reason":"Added timeString ref with examples, extended precision enum with million_years/billion_years"}
{"id":"nayra-a2t","title":"Create example SPARQL queries for Wikidata patterns","description":"Create example SPARQL queries demonstrating how to fetch data from Wikidata for different use cases.\n\n**Location:** `examples/sparql/`\n\n**Queries to create:**\n1. `wars.sparql` - Fetch major wars with start/end dates\n2. `space-missions.sparql` - Space exploration events\n3. `ancient-events.sparql` - Events with BCE dates\n4. `scientists.sparql` - Scientists with birth/death dates\n\n**Each query should:**\n- Use SERVICE wikibase:label for labels\n- Select fields matching Wikidata property mapping (spec lines 175-186)\n- Include comments explaining the query\n- Be tested against query.wikidata.org\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-wikidata-compatibility\n\n**Verification:**\n1. All .sparql files exist in examples/sparql/\n2. Each query runs successfully on query.wikidata.org\n3. Results can be transformed using wikidata-transformer","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:41.488280805-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:47:42.568970846-03:00","closed_at":"2026-01-23T21:47:42.568970846-03:00","close_reason":"Created 4 SPARQL queries (wars, space-missions, ancient-events, scientists) with README"}
{"id":"nayra-a7w","title":"Phase 4: Canvas renderer with culling","description":"Create renderer.js with DPI scaling, ResizeObserver, draw() with culling, FPS counter. Events as colored rectangles.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.654969362-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:06:07.720039105-03:00","closed_at":"2026-01-20T20:06:07.720039105-03:00","close_reason":"Closed","dependencies":[{"issue_id":"nayra-a7w","depends_on_id":"nayra-a9u","type":"blocks","created_at":"2026-01-20T19:49:24.782150587-03:00","created_by":"charly vibes"}]}
{"id":"nayra-a9u","title":"Phase 3: State management store","description":"Create store.js with viewportStart, scale, canvasWidth, revision counter, events array. Derived viewportEnd. dispatch/subscribe pattern. ~60 lines.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:00.53904498-03:00","created_by":"charly vibes","updated_at":"2026-01-20T20:02:37.596194033-03:00","closed_at":"2026-01-20T20:02:37.596194033-03:00","close_reason":"State management store implemented with 22 tests","dependencies":[{"issue_id":"nayra-a9u","depends_on_id":"nayra-96o","type":"blocks","created_at":"2026-01-20T19:49:24.716600425-03:00","created_by":"charly vibes"}]}
{"id":"nayra-adr","title":"Add data format documentation to README","description":"Add documentation to README explaining the data format and how to create/import event data.\n\n**Sections to add:**\n\n1. **Event Format** - Required and optional fields with examples\n2. **Time Formats** - Supported formats with examples (ISO, BCE, Ma/Ga)\n3. **Dataset Structure** - Simple array vs extended format with metadata\n4. **Importing Data** - How to load JSON files\n5. **Wikidata Integration** - How to use SPARQL queries and transformer\n6. **Validation** - Error messages and how to fix common issues\n\n**Keep it concise** - Link to spec for full details rather than duplicating everything.\n\n**Ref:** openspec/specs/data-schema/spec.md\n\n**Verification:**\n1. README has Data Format section\n2. Examples are copy-pasteable and valid\n3. Links to spec work correctly","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:38.528743586-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:46:13.676470006-03:00","closed_at":"2026-01-23T21:46:13.676470006-03:00","close_reason":"Added Data Format section to README with event structure, time formats, dataset structure, and Wikidata integration","dependencies":[{"issue_id":"nayra-adr","depends_on_id":"nayra-h19","type":"blocks","created_at":"2026-01-22T00:30:11.744050826-03:00","created_by":"charly vibes"}]}
{"id":"nayra-ddl","title":"Validator end\u003cstart check should parse dates semantically","description":"The validator's end\u003cstart comparison uses string comparison, which fails for negative years and BCE dates.\n\n**Problem:**\n- `'-1184' \u003c '-1194'` lexicographically, but -1184 is actually AFTER -1194 chronologically\n- `'323 BCE' \u003c '336 BCE'` lexicographically, but 323 BCE is AFTER 336 BCE\n- Same issue with Ma/Ga notation for geological time spans\n\n**Affected code:**\n- `src/data/validator.js` lines 98-109 (INVALID_END_BEFORE_START check)\n\n**Solution:**\nUse `parseTimeQuery` from `src/core/time-parser.js` to convert dates to BigInt timestamps before comparing.\n\n**Test cases to add:**\n1. Event with start='336 BCE' end='323 BCE' should be VALID (span event)\n2. Event with start='-1194' end='-1184' should be VALID\n3. Event with start='538 Ma' end='485 Ma' should be VALID\n4. Event with start='2024' end='2020' should be INVALID\n\n**Workaround:**\nExample files currently use point events for BCE/geological spans.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-23T18:13:18.899472763-03:00","created_by":"charly vibes","updated_at":"2026-01-23T21:39:21.619040704-03:00","closed_at":"2026-01-23T21:39:21.619040704-03:00","close_reason":"Fixed by using parseTimeQuery for semantic date comparison instead of string comparison"}
{"id":"nayra-e9d","title":"Write tests for data validation and transformation","description":"Write comprehensive tests for the data validation and transformation components.\n\n**Test files:**\n- `src/data/validator.test.js` - Schema validation tests\n- `src/time/time-parser.test.js` - Time format parsing tests\n- `src/data/wikidata-transformer.test.js` - Wikidata transformer tests\n- `src/data/jsonld-transformer.test.js` - JSON-LD transformer tests\n\n**Test scenarios from spec:**\n\n*Validator tests:*\n- Minimal valid event (id, start, label only)\n- Missing required field → error with field name\n- Empty id → error with hint\n- Duplicate ids → error listing both\n- Invalid precision → error with allowed values\n- end \u003c start → rejection\n\n*Time parser tests:*\n- ISO 8601 datetime and date\n- Negative year (-44 → 44 BCE)\n- BCE/BC notation (case insensitive)\n- Ma/Ga geological notation\n- Year zero rejection with helpful error\n\n*Transformer tests:*\n- Wikidata URI → Q-number extraction\n- Wikidata BCE date adjustment\n- Schema.org property mapping\n- @graph array handling\n\n**Ref:** openspec/specs/data-schema/spec.md (all scenario blocks)\n\n**Verification:**\n1. All test files exist\n2. `just test` passes with no failures\n3. Coverage includes all spec scenarios","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:34.955658759-03:00","created_by":"charly vibes","updated_at":"2026-01-23T18:09:25.940908898-03:00","closed_at":"2026-01-23T18:09:25.940908898-03:00","close_reason":"All test scenarios from spec are now covered. Added missing end\u003cstart validation with 3 new tests. Total: 226 tests passing.","dependencies":[{"issue_id":"nayra-e9d","depends_on_id":"nayra-h19","type":"blocks","created_at":"2026-01-22T00:24:55.6591879-03:00","created_by":"charly vibes"},{"issue_id":"nayra-e9d","depends_on_id":"nayra-5jt","type":"blocks","created_at":"2026-01-22T00:24:55.704506366-03:00","created_by":"charly vibes"},{"issue_id":"nayra-e9d","depends_on_id":"nayra-2zs","type":"blocks","created_at":"2026-01-22T00:33:09.816314308-03:00","created_by":"charly vibes"}]}
{"id":"nayra-eoh","title":"Add keyboard shortcut to jump to today and reset zoom","description":"Add a keyboard shortcut (e.g., Home or 'T') to quickly navigate back to the current time and reset zoom to a reasonable default. Essential for UX when exploring deep time.","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T20:55:35.444058462-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:58:25.475677781-03:00","closed_at":"2026-01-21T20:58:25.475677781-03:00","close_reason":"Implemented: Home and 'h' keys jump to today with default zoom"}
{"id":"nayra-eoz","title":"Add timescales view to help menu","status":"closed","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-21T22:55:59.726133902-03:00","created_by":"charly vibes","updated_at":"2026-01-21T22:58:13.287808164-03:00","closed_at":"2026-01-21T22:58:13.287808164-03:00","close_reason":"Implemented tabbed help menu with Shortcuts and Timescales views, arrow key navigation"}
{"id":"nayra-h19","title":"Implement schema validator in src/data/validator.js","description":"Implement a schema validator that validates event data against the JSON Schema and provides clear error messages.\n\n**Location:** `src/data/validator.js`\n\n**Requirements (from spec lines 268-317):**\n- Use ajv or similar JSON Schema validation library\n- Validate: required fields present, id non-empty and unique, end \u003e= start, priority 0-4, precision enum\n- Error format per spec:\n  ```\n  Validation Error: [RULE_CODE]\n    Event: [id or index]\n    Field: [field name]\n    Value: [provided value]\n    Expected: [what was expected]\n    Hint: [how to fix]\n  ```\n- Support partial import: valid events imported, invalid skipped with summary\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-validation-and-error-reporting\n\n**Verification:**\n1. `import { validate } from './validator.js'` works\n2. validate([{id:'1', start:'2024', label:'Test'}]) returns success\n3. validate([{id:'', start:'2024', label:'Test'}]) returns error with hint\n4. Run: `just test` passes validator tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:19.316299908-03:00","created_by":"charly vibes","updated_at":"2026-01-22T20:00:48.788366128-03:00","closed_at":"2026-01-22T20:00:48.788366128-03:00","close_reason":"Implemented schema validator with TDD - 18 passing tests","dependencies":[{"issue_id":"nayra-h19","depends_on_id":"nayra-7wn","type":"blocks","created_at":"2026-01-22T00:24:55.609977429-03:00","created_by":"charly vibes"}]}
{"id":"nayra-k32","title":"Create GitHub Action for GitHub Pages deployment","description":"Create a GitHub Action workflow to automatically deploy the application to GitHub Pages on push to main branch.\n\n## Acceptance Criteria\n- Workflow triggers on push to main\n- Builds the project and deploys to GitHub Pages\n- Properly configures base URL for GitHub Pages\n\n## Verification\n1. Create .github/workflows/deploy.yml\n2. Push to a branch and open PR\n3. Check Actions tab runs successfully\n4. Merge to main\n5. Verify site deployed to GitHub Pages\n\n## Approach\nTest by pushing workflow and observing results. Unit tests not applicable for CI/CD workflows.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-21T21:16:51.362909206-03:00","created_by":"charly vibes","updated_at":"2026-01-21T21:42:15.929207633-03:00","closed_at":"2026-01-21T21:42:15.929207633-03:00","close_reason":"Closed"}
{"id":"nayra-lv9","title":"Add tests for jsonld-transformer.js","description":"The new jsonld-transformer.js has no test coverage. Need tests for:\n- Happy path: single event, @graph array, top-level array\n- Edge cases: missing fields, @value objects, type variations (Event, schema:Event, full URL)\n- Error cases: completely invalid input, null/undefined handling\nThis is critical as it handles external data formats.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:20.421948565-03:00","created_by":"charly vibes","updated_at":"2026-01-22T19:57:51.123534833-03:00","closed_at":"2026-01-22T19:57:51.123534833-03:00","close_reason":"Added 13 comprehensive tests for jsonld-transformer.js"}
{"id":"nayra-o0p","title":"Add tests for new time-parser formats (BCE, CE, natural language, ISO datetime)","description":"New time-parser formats added in data-schema commit lack test coverage:\n- BCE/BC notation (44 BCE, 44 BC)\n- CE/AD notation (1066 CE, 1066 AD)\n- Natural language (X billion/million years ago)\n- ISO 8601 datetime with timezone\n- Year zero rejection error handling","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T01:00:20.779725736-03:00","created_by":"charly vibes","updated_at":"2026-01-22T19:57:51.013180081-03:00","closed_at":"2026-01-22T19:57:51.013180081-03:00","close_reason":"Added 13 tests for BCE/CE, ISO datetime, natural language formats"}
{"id":"nayra-pnu","title":"Phase 2: Visual Feedback in Renderer","description":"Add visual feedback for hover and selected states.\n\n1. Create src/rendering/colors.js with lightenColor(hexColor, amount) utility\n2. Modify src/rendering/renderer.js drawEvent() to:\n   - Hover state: lighter fill (20% toward white)\n   - Selected state: 2px yellow border (#ffcc00)\n\nTests needed:\n- test/unit/colors.test.js: lightenColor works with 6-char and 3-char hex, clamps at white\n- test/unit/renderer.test.js: hovered event has different visual, selected event has border, multiple selected events show selected state\n\nSuccess: just test passes with updated renderer tests.\n\nRef: plans/2026-01-23-event-selection.md#phase-2-visual-feedback-in-renderer\n\nCRITICAL: Follow TDD and Tidy First.","status":"open","priority":1,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-23T21:58:11.433598129-03:00","created_by":"charly vibes","updated_at":"2026-01-23T22:00:36.420848871-03:00"}
{"id":"nayra-qvm","title":"Update time-parser to handle all data-schema formats","description":"Update the time-parser to handle all date/time formats defined in the data-schema spec.\n\n**Location:** `src/time/time-parser.js` (verify actual path)\n\n**Formats to support (from spec lines 61-79):**\n- ISO 8601: 2024-03-15T10:30:00Z, 2024-03-15\n- Year only: 1969\n- Negative year: -44 (meaning 44 BCE, historical convention)\n- BCE/BC notation: 44 BCE, 44 BC (case insensitive)\n- CE/AD notation: 1066 CE, 1066 AD\n- Month-Year: March 1969, 1969-03\n- Geological Ma: 65 Ma, 65 MYA (million years ago)\n- Geological Ga: 4.5 Ga, 4.5 BYA (billion years ago)\n- Relative: 13.8 billion years ago\n\n**Special handling:**\n- Year zero (0, -0) must be rejected with helpful error (spec lines 103-108)\n- Use historical year numbering (no year zero), not astronomical\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-time-formats\n\n**Verification:**\n1. parseTime('2024-03-15') returns valid timestamp\n2. parseTime('44 BCE') returns negative timestamp for 44 BCE\n3. parseTime('65 Ma') returns ~65 million years ago\n4. parseTime('0') throws error mentioning year zero\n5. Run: `just test` passes time-parser tests","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:25.932350722-03:00","created_by":"charly vibes","updated_at":"2026-01-22T00:52:13.944027913-03:00","closed_at":"2026-01-22T00:52:13.944027913-03:00","close_reason":"Closed"}
{"id":"nayra-s7i","title":"Create example data files for different timescales","description":"Create example data files demonstrating different timescales and data sources.\n\n**Location:** `examples/`\n\n**Files to create (from spec lines 319-343):**\n\n1. **space-exploration.json** (Recent history)\n   - Events from 1957-present\n   - Mix of point events (launches) and span events (missions)\n   - Use ISO dates\n\n2. **ancient-civilizations.json** (Ancient history)\n   - Events using BCE notation\n   - Year-only precision for approximate dates\n   - Include Egyptian, Greek, Roman events\n\n3. **earth-history.json** (Deep time)\n   - Geological events using Ma/Ga notation\n   - From Big Bang (13.8 Ga) to present\n   - Include mass extinctions, era boundaries\n\n4. **wikidata-wars.json** (Wikidata format)\n   - Demonstrate Wikidata property mapping\n   - Include source fields with Q-numbers\n   - Show transformed output format\n\n**Each file should:**\n- Be valid against event.schema.json\n- Include 5-10 events\n- Demonstrate relevant time formats\n\n**Ref:** openspec/specs/data-schema/spec.md#requirement-example-data-files\n\n**Verification:**\n1. All 4 files exist in examples/\n2. Each validates: `npx ajv validate -s src/data/event.schema.json -d examples/*.json`\n3. Files load correctly in the application","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-22T00:24:22.57165324-03:00","created_by":"charly vibes","updated_at":"2026-01-23T18:13:56.990740292-03:00","closed_at":"2026-01-23T18:13:56.990740292-03:00","close_reason":"Created 4 example data files: space-exploration.json (8 events), ancient-civilizations.json (8 events), earth-history.json (10 events), wikidata-wars.json (7 events). All validate successfully.","dependencies":[{"issue_id":"nayra-s7i","depends_on_id":"nayra-h19","type":"blocks","created_at":"2026-01-22T00:24:55.755157045-03:00","created_by":"charly vibes"},{"issue_id":"nayra-s7i","depends_on_id":"nayra-qvm","type":"blocks","created_at":"2026-01-22T00:30:08.963436907-03:00","created_by":"charly vibes"}]}
{"id":"nayra-y9x","title":"Phase 8: Deep-time sample data \u0026 validation","description":"Create samples.js with 100 events: 50 recent (1900-2100), 25 geological (Ma), 25 cosmological (Ga). Add axis labels and grid. Validate 60FPS at all scales.\n\nCRITICAL: Follow TDD and Tidy First.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-20T19:49:01.075262423-03:00","created_by":"charly vibes","updated_at":"2026-01-21T20:49:23.319907-03:00","closed_at":"2026-01-21T20:49:23.319907-03:00","close_reason":"Implemented grid lines and adaptive axis labels","dependencies":[{"issue_id":"nayra-y9x","depends_on_id":"nayra-8cl","type":"blocks","created_at":"2026-01-20T19:49:25.048121691-03:00","created_by":"charly vibes"}]}
